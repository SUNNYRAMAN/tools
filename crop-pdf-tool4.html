<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crop PDF Tool - Free Online PDF Cropping | EditInSeconds.com</title>
    <meta name="description" content="Crop PDF pages online for free with EditInSeconds.com. Remove margins, select specific areas, and customize your PDF documents easily. No registration required.">
    <meta name="keywords" content="crop pdf, crop pdf online, crop pdf margins, crop pdf pages, pdf cropper, pdf editing, edit pdf, pdf tools, online pdf editor, free pdf tools, crop pdf document, remove pdf margins, pdf customization">
    <meta name="author" content="EditInSeconds.com">
    
    <!-- PDF.js Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.worker.min.js"></script>
    
    <!-- jsPDF Library for PDF generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary: #4361ee;
            --primary-dark: #3a56d4;
            --secondary: #7209b7;
            --accent: #f72585;
            --light: #f8f9fa;
            --dark: #212529;
            --gray: #6c757d;
            --success: #4cc9f0;
            --border-radius: 12px;
            --box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f7ff;
            color: var(--dark);
            line-height: 1.6;
            font-size: 16px;
            overflow-x: hidden;
        }

        .container {
            width: 100%;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header Styles */
        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.8rem;
            font-weight: 700;
            margin-right: auto;
        }

        .logo i {
            color: var(--accent);
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 1.5rem;
            align-items: center;
        }

        nav a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition);
            padding: 8px 15px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        nav a:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .auth-buttons {
            display: flex;
            gap: 1rem;
            margin-left: auto;
        }

        .btn {
            padding: 0.6rem 1.5rem;
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            border: none;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .btn-outline {
            background: transparent;
            border: 2px solid white;
            color: white;
        }

        .btn-outline:hover {
            background: white;
            color: var(--primary);
        }

        .btn-primary {
            background: var(--accent);
            color: white;
        }

        .btn-primary:hover {
            background: #e11575;
            transform: translateY(-2px);
        }

        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
        }

        /* Breadcrumb */
        .breadcrumb {
            padding: 1rem 0;
            font-size: 0.9rem;
            color: var(--gray);
        }

        .breadcrumb a {
            color: var(--primary);
            text-decoration: none;
        }

        .breadcrumb a:hover {
            text-decoration: underline;
        }

        /* Tool Hero Section */
        .tool-hero {
            padding: 3rem 0;
            background: linear-gradient(135deg, #f5f7ff 0%, #e6e9ff 100%);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .tool-hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 100" fill="%234361ee" opacity="0.03"><polygon points="0,0 1000,50 1000,100 0,100"/></svg>') no-repeat center bottom;
            background-size: cover;
        }

        .tool-hero h1 {
            font-size: 2.8rem;
            margin-bottom: 1rem;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            line-height: 1.2;
            position: relative;
        }

        .tool-hero p {
            font-size: 1.2rem;
            max-width: 700px;
            margin: 0 auto 2rem;
            color: var(--gray);
            position: relative;
        }

        /* Ad Units */
        .ad-unit {
            background: #f8f9fa;
            border-radius: var(--border-radius);
            padding: 15px;
            margin: 2rem 0;
            text-align: center;
            border: 1px dashed #dee2e6;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 90px;
        }

        .ad-unit.horizontal {
            width: 100%;
        }

        /* Tool Container */
        .tool-container {
            display: flex;
            gap: 2rem;
            padding: 2rem 0;
        }

        /* Tool Sidebar */
        .tool-sidebar {
            flex: 0 0 300px;
            background: white;
            border-radius: var(--border-radius);
            padding: 1.5rem;
            box-shadow: var(--box-shadow);
            height: fit-content;
        }

        .tool-sidebar h3 {
            margin-bottom: 1.5rem;
            color: var(--dark);
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .tool-sidebar h3 i {
            color: var(--primary);
        }

        .sidebar-section {
            margin-bottom: 2rem;
        }

        .sidebar-section h4 {
            margin-bottom: 1rem;
            color: var(--dark);
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .sidebar-section h4 i {
            color: var(--primary);
            font-size: 0.9rem;
        }

        .crop-controls {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .control-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .control-group label {
            font-size: 0.9rem;
            color: var(--dark);
            font-weight: 500;
        }

        .control-group input {
            padding: 0.8rem;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            font-size: 0.9rem;
            transition: var(--transition);
        }

        .control-group input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.1);
        }

        .radio-group {
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
        }

        .radio-option {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            cursor: pointer;
        }

        .radio-option input {
            margin: 0;
        }

        .radio-option label {
            font-weight: normal;
            cursor: pointer;
        }

        .btn-group {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .btn-full {
            width: 100%;
            padding: 1rem;
            font-size: 1rem;
        }

        .btn-secondary {
            background: var(--secondary);
            color: white;
        }

        .btn-secondary:hover {
            background: #6510a3;
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-success:hover {
            background: #3ab4d9;
        }

        /* Tool Main Area */
        .tool-main {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .upload-area {
            background: white;
            border-radius: var(--border-radius);
            padding: 2rem;
            box-shadow: var(--box-shadow);
            text-align: center;
            transition: var(--transition);
            border: 2px dashed #dee2e6;
        }

        .upload-area.active {
            border-color: var(--primary);
            background: rgba(67, 97, 238, 0.03);
        }

        .upload-area i {
            font-size: 3rem;
            color: var(--primary);
            margin-bottom: 1rem;
        }

        .upload-area h3 {
            margin-bottom: 1rem;
            color: var(--dark);
        }

        .upload-area p {
            color: var(--gray);
            margin-bottom: 1.5rem;
        }

        .file-input {
            display: none;
        }

        .file-label {
            display: inline-block;
            padding: 0.8rem 1.5rem;
            background: var(--primary);
            color: white;
            border-radius: 50px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
        }

        .file-label:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        .preview-area {
            background: white;
            border-radius: var(--border-radius);
            padding: 2rem;
            box-shadow: var(--box-shadow);
            display: none;
        }

        .preview-area.active {
            display: block;
        }

        .preview-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .preview-header h3 {
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .preview-header h3 i {
            color: var(--primary);
        }

        .preview-controls {
            display: flex;
            gap: 1rem;
        }

        .preview-container {
            position: relative;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            overflow: hidden;
            height: 600px;
            background: #f8f9fa;
            margin-bottom: 1.5rem;
        }

        #pdf-canvas {
            display: block;
            margin: 0 auto;
            max-width: 100%;
            max-height: 100%;
        }

        .crop-overlay {
            position: absolute;
            border: 2px dashed var(--accent);
            background: rgba(247, 37, 133, 0.1);
            cursor: move;
            display: none;
        }

        .crop-handle {
            position: absolute;
            width: 12px;
            height: 12px;
            background: var(--accent);
            border-radius: 50%;
            cursor: pointer;
        }

        .handle-tl { top: -6px; left: -6px; cursor: nw-resize; }
        .handle-tr { top: -6px; right: -6px; cursor: ne-resize; }
        .handle-bl { bottom: -6px; left: -6px; cursor: sw-resize; }
        .handle-br { bottom: -6px; right: -6px; cursor: se-resize; }

        .preview-footer {
            display: flex;
            justify-content: space-between;
            margin-top: 1.5rem;
            padding-top: 1.5rem;
            border-top: 1px solid #dee2e6;
        }

        .page-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .page-nav {
            display: flex;
            gap: 0.5rem;
        }

        .page-btn {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
        }

        .page-btn:hover {
            background: #f8f9fa;
            border-color: var(--primary);
        }

        .page-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .page-btn:disabled:hover {
            background: white;
            border-color: #dee2e6;
        }

        /* Loading State */
        .loading {
            display: none;
            text-align: center;
            padding: 2rem;
        }

        .loading.active {
            display: block;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(67, 97, 238, 0.2);
            border-left: 4px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Result Area */
        .result-area {
            background: white;
            border-radius: var(--border-radius);
            padding: 2rem;
            box-shadow: var(--box-shadow);
            display: none;
        }

        .result-area.active {
            display: block;
        }

        .result-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .result-header h3 {
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .result-header h3 i {
            color: var(--success);
        }

        .result-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1.5rem;
            padding: 2rem;
            border: 2px dashed #dee2e6;
            border-radius: 8px;
            background: #f8f9fa;
        }

        .result-icon {
            width: 80px;
            height: 80px;
            background: var(--success);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: white;
        }

        .result-info {
            text-align: center;
        }

        .result-info h4 {
            margin-bottom: 0.5rem;
            color: var(--dark);
        }

        .result-info p {
            color: var(--gray);
        }

        .download-btn {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 1rem 2rem;
            background: var(--success);
            color: white;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 600;
            transition: var(--transition);
        }

        .download-btn:hover {
            background: #3ab4d9;
            transform: translateY(-2px);
        }

        /* Features Section */
        .features {
            padding: 5rem 0;
            background: white;
        }

        .section-title {
            text-align: center;
            margin-bottom: 3rem;
        }

        .section-title h2 {
            font-size: 2.5rem;
            color: var(--dark);
            margin-bottom: 1rem;
        }

        .section-title p {
            color: var(--gray);
            max-width: 600px;
            margin: 0 auto;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }

        .feature-card {
            text-align: center;
            padding: 2rem;
            border-radius: var(--border-radius);
            transition: var(--transition);
        }

        .feature-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
        }

        .feature-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.5rem;
            font-size: 2rem;
            color: white;
        }

        /* FAQ Section */
        .faq-section {
            padding: 5rem 0;
            background: #f8f9fa;
        }

        .faq-item {
            margin-bottom: 1.5rem;
            background: white;
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--box-shadow);
            transition: var(--transition);
        }

        .faq-item:hover {
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .faq-question {
            padding: 1.5rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .faq-answer {
            padding: 0 1.5rem 1.5rem;
            display: none;
        }

        .faq-item.active .faq-answer {
            display: block;
        }

        /* CTA Section */
        .cta {
            padding: 5rem 0;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .cta::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 100" fill="white" opacity="0.05"><polygon points="0,100 1000,50 1000,0 0,0"/></svg>') no-repeat center top;
            background-size: cover;
        }

        .cta h2 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            position: relative;
        }

        .cta p {
            max-width: 600px;
            margin: 0 auto 2rem;
            font-size: 1.1rem;
            position: relative;
        }

        /* Footer */
        footer {
            background: var(--dark);
            color: white;
            padding: 3rem 0 1.5rem;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .footer-column h3 {
            margin-bottom: 1.5rem;
            font-size: 1.2rem;
        }

        .footer-column ul {
            list-style: none;
        }

        .footer-column ul li {
            margin-bottom: 0.8rem;
        }

        .footer-column a {
            color: #adb5bd;
            text-decoration: none;
            transition: var(--transition);
        }

        .footer-column a:hover {
            color: white;
        }

        .social-links {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }

        .social-links a {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            transition: var(--transition);
        }

        .social-links a:hover {
            background: var(--primary);
            transform: translateY(-3px);
        }

        .copyright {
            text-align: center;
            padding-top: 1.5rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #adb5bd;
            font-size: 0.9rem;
        }

        /* Responsive Styles */
        @media (max-width: 992px) {
            .tool-hero h1 {
                font-size: 2.2rem;
            }
            
            .tool-container {
                flex-direction: column;
            }
            
            .tool-sidebar {
                flex: 1;
                order: 2;
            }
            
            .tool-main {
                order: 1;
            }
        }

        @media (max-width: 768px) {
            .header-content {
                flex-wrap: wrap;
            }
            
            .mobile-menu-btn {
                display: block;
            }
            
            nav {
                width: 100%;
                margin-top: 1rem;
                display: none;
            }
            
            nav.active {
                display: block;
            }
            
            nav ul {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .auth-buttons {
                margin-top: 1rem;
                width: 100%;
                justify-content: center;
            }
            
            .tool-hero h1 {
                font-size: 1.8rem;
            }
            
            .preview-container {
                height: 400px;
            }
        }

        @media (max-width: 576px) {
            .tool-hero {
                padding: 2rem 0;
            }
            
            .section-title h2 {
                font-size: 2rem;
            }
            
            .features-grid, .footer-content {
                grid-template-columns: 1fr;
            }
            
            .preview-container {
                height: 300px;
            }
            
            .preview-footer {
                flex-direction: column;
                gap: 1rem;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-tools"></i>
                    <span>EditInSeconds.com</span>
                </div>
                
                <button class="mobile-menu-btn" id="mobileMenuBtn" aria-label="Toggle navigation menu">
                    <i class="fas fa-bars"></i>
                </button>
                
                <nav id="mainNav">
                    <ul>
                        <li><a href="/tools.html"><i class="fas fa-tools"></i> All Tools</a></li>
                        <li><a href="/tools/merge-pdf.html"><i class="fas fa-object-group"></i> Merge PDF</a></li>
                        <li><a href="/tools/split-pdf.html"><i class="fas fa-cut"></i> Split PDF</a></li>
                        <li><a href="/tools/pdf-compressor.html"><i class="fas fa-compress"></i> Compress PDF</a></li>
                    </ul>
                </nav>
                
                <div class="auth-buttons">
                    <a href="/tools/unlock-pdf-tool.html" class="btn btn-outline">Unlock PDF</a>
                    <a href="/tools/pdf-repair-tool.html" class="btn btn-primary">Repair PDF</a>
                </div>
            </div>
        </div>
    </header>

    <!-- Breadcrumb -->
    <div class="container">
        <div class="breadcrumb">
            <a href="/">Home</a> > <a href="/tools.html">All Tools</a> > Crop PDF Tool
        </div>
    </div>

    <!-- Tool Hero Section -->
    <section class="tool-hero">
        <div class="container">
            <h1>Crop PDF Tool</h1>
            <p>Remove margins, select specific areas, and customize your PDF documents easily with our free online PDF cropper.</p>
        </div>
    </section>

    <!-- Ad Unit - Leaderboard -->
    <div class="container">
        <div class="ad-unit horizontal">
            <!-- AdSense Leaderboard Ad -->
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-YOUR_AD_CLIENT_ID"
                 data-ad-slot="YOUR_LEADERBOARD_SLOT_ID"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
            <script>
                 (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>
    </div>

    <!-- Tool Container -->
    <div class="container">
        <div class="tool-container">
            <!-- Tool Sidebar -->
            <div class="tool-sidebar">
                <h3><i class="fas fa-crop-alt"></i> Crop Settings</h3>
                
                <div class="sidebar-section">
                    <h4><i class="fas fa-ruler-combined"></i> Crop Method</h4>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="manual-crop" name="crop-method" value="manual" checked>
                            <label for="manual-crop">Manual Selection</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="margin-crop" name="crop-method" value="margin">
                            <label for="margin-crop">Margin Adjustment</label>
                        </div>
                    </div>
                </div>
                
                <div class="sidebar-section">
                    <h4><i class="fas fa-crop"></i> Crop Area</h4>
                    <div class="crop-controls">
                        <div class="control-group">
                            <label for="crop-top">Top (px)</label>
                            <input type="number" id="crop-top" value="0" min="0">
                        </div>
                        <div class="control-group">
                            <label for="crop-right">Right (px)</label>
                            <input type="number" id="crop-right" value="0" min="0">
                        </div>
                        <div class="control-group">
                            <label for="crop-bottom">Bottom (px)</label>
                            <input type="number" id="crop-bottom" value="0" min="0">
                        </div>
                        <div class="control-group">
                            <label for="crop-left">Left (px)</label>
                            <input type="number" id="crop-left" value="0" min="0">
                        </div>
                    </div>
                </div>
                
                <div class="sidebar-section">
                    <h4><i class="fas fa-cog"></i> Options</h4>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="checkbox" id="apply-all-pages" checked>
                            <label for="apply-all-pages">Apply to all pages</label>
                        </div>
                        <div class="radio-option">
                            <input type="checkbox" id="maintain-ratio">
                            <label for="maintain-ratio">Maintain aspect ratio</label>
                        </div>
                    </div>
                </div>
                
                <div class="btn-group">
                    <button id="reset-crop" class="btn btn-outline btn-full" style="color: var(--dark); border-color: var(--gray);">Reset</button>
                    <button id="apply-crop" class="btn btn-secondary btn-full">Apply Crop</button>
                    <button id="download-pdf" class="btn btn-success btn-full" disabled>Download Cropped PDF</button>
                </div>
            </div>
            
            <!-- Tool Main Area -->
            <div class="tool-main">
                <!-- Upload Area -->
                <div class="upload-area" id="uploadArea">
                    <i class="fas fa-file-pdf"></i>
                    <h3>Upload PDF to Crop</h3>
                    <p>Drag & drop your PDF file here or click to browse</p>
                    <p class="ad-label">Max file size: 50MB</p>
                    <input type="file" id="fileInput" class="file-input" accept=".pdf">
                    <label for="fileInput" class="file-label">Choose PDF File</label>
                </div>
                
                <!-- Loading State -->
                <div class="loading" id="loadingState">
                    <div class="spinner"></div>
                    <p>Processing your PDF file...</p>
                </div>
                
                <!-- Preview Area -->
                <div class="preview-area" id="previewArea">
                    <div class="preview-header">
                        <h3><i class="fas fa-eye"></i> PDF Preview</h3>
                        <div class="preview-controls">
                            <button id="zoom-out" class="btn btn-outline" style="color: var(--dark); border-color: var(--gray); padding: 0.5rem;"><i class="fas fa-search-minus"></i></button>
                            <button id="zoom-in" class="btn btn-outline" style="color: var(--dark); border-color: var(--gray); padding: 0.5rem;"><i class="fas fa-search-plus"></i></button>
                            <button id="reset-view" class="btn btn-outline" style="color: var(--dark); border-color: var(--gray);">Reset View</button>
                        </div>
                    </div>
                    
                    <div class="preview-container">
                        <canvas id="pdf-canvas"></canvas>
                        <div class="crop-overlay" id="cropOverlay">
                            <div class="crop-handle handle-tl"></div>
                            <div class="crop-handle handle-tr"></div>
                            <div class="crop-handle handle-bl"></div>
                            <div class="crop-handle handle-br"></div>
                        </div>
                    </div>
                    
                    <div class="preview-footer">
                        <div class="page-info">
                            <span>Page: <span id="current-page">1</span> of <span id="total-pages">1</span></span>
                        </div>
                        <div class="page-nav">
                            <button id="prev-page" class="page-btn" disabled><i class="fas fa-chevron-left"></i></button>
                            <button id="next-page" class="page-btn" disabled><i class="fas fa-chevron-right"></i></button>
                        </div>
                    </div>
                </div>
                
                <!-- Result Area -->
                <div class="result-area" id="resultArea">
                    <div class="result-header">
                        <h3><i class="fas fa-check-circle"></i> PDF Successfully Cropped</h3>
                    </div>
                    
                    <div class="result-content">
                        <div class="result-icon">
                            <i class="fas fa-file-pdf"></i>
                        </div>
                        <div class="result-info">
                            <h4>Your PDF is ready to download</h4>
                            <p>The cropped PDF has been processed successfully</p>
                        </div>
                        <a href="#" id="downloadLink" class="download-btn">
                            <i class="fas fa-download"></i>
                            Download Cropped PDF
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Ad Unit - Medium Rectangle -->
    <div class="container">
        <div class="ad-unit horizontal">
            <!-- AdSense Medium Rectangle Ad -->
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-YOUR_AD_CLIENT_ID"
                 data-ad-slot="YOUR_MEDIUM_RECTANGLE_SLOT_ID"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
            <script>
                 (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>
    </div>

    <!-- Features Section -->
    <section class="features">
        <div class="container">
            <div class="section-title">
                <h2>Why Use Our Crop PDF Tool?</h2>
                <p>Our PDF cropper offers powerful features to customize your documents</p>
            </div>

            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-crop-alt"></i>
                    </div>
                    <h3>Precise Cropping</h3>
                    <p>Select exact areas to crop with pixel-perfect precision using our intuitive interface.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-border-all"></i>
                    </div>
                    <h3>Margin Control</h3>
                    <p>Adjust margins uniformly or individually for each side of your PDF pages.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-file-medical"></i>
                    </div>
                    <h3>Batch Processing</h3>
                    <p>Apply the same crop settings to multiple pages or your entire document at once.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <h3>Secure Processing</h3>
                    <p>Your files are processed securely and deleted automatically after processing.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- FAQ Section -->
    <section class="faq-section">
        <div class="container">
            <div class="section-title">
                <h2>Frequently Asked Questions</h2>
                <p>Find answers to common questions about cropping PDFs</p>
            </div>

            <div class="faq-container">
                <div class="faq-item">
                    <div class="faq-question">
                        <span>How do I crop a PDF file?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>Simply upload your PDF file, use the crop tool to select the area you want to keep, and then download the cropped PDF. You can either manually select the area or adjust the margins numerically.</p>
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question">
                        <span>Can I crop multiple pages at once?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>Yes, you can apply the same crop settings to all pages in your PDF document. Just check the "Apply to all pages" option before applying the crop.</p>
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question">
                        <span>Will cropping affect the quality of my PDF?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>No, cropping a PDF doesn't affect the quality of the content. It simply changes the visible area of each page, similar to trimming the edges of a physical document.</p>
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question">
                        <span>Is there a file size limit for cropping PDFs?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>We support PDF files up to 50MB in size. For larger files, we recommend compressing them first using our PDF compressor tool.</p>
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question">
                        <span>Can I undo a crop if I make a mistake?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>Yes, you can reset the crop settings at any time before downloading the file. If you've already downloaded the cropped PDF, you'll need to re-upload the original file to make changes.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- CTA Section -->
    <section class="cta">
        <div class="container">
            <h2>Ready to Crop Your PDF?</h2>
            <p>Join thousands of users who rely on EditInSeconds.com for their PDF editing needs.</p>
            <a href="#uploadArea" class="btn btn-primary" style="background: white; color: var(--primary);">Crop a PDF Now</a>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>EditInSeconds.com</h3>
                    <p>Your all-in-one solution for image and PDF tools. Fast, secure, and easy to use.</p>
                    <div class="social-links">
                        <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                        <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                        <a href="#" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>

                <div class="footer-column">
                    <h3>Image Tools</h3>
                    <ul>
                        <li><a href="/tools/img-compress.html">Compress Image</a></li>
                        <li><a href="/tools/img-resizer.html">Resize Image</a></li>
                        <li><a href="/tools/img-converter.html">Convert Image</a></li>
                        <li><a href="/tools/watermark-tool.html">Watermark</a></li>
                        <li><a href="/tools/crop-img-tool.html">Crop Image</a></li>
                    </ul>
                </div>

                <div class="footer-column">
                    <h3>PDF Tools</h3>
                    <ul>
                        <li><a href="/tools/pdf-compressor.html">Compress PDF</a></li>
                        <li><a href="/tools/merge-pdf.html">Merge PDF</a></li>
                        <li><a href="/tools/split-pdf.html">Split PDF</a></li>
                        <li><a href="/tools/pdf-word-converter.html">PDF to Word</a></li>
                        <li><a href="/tools/pdf-protector.html">Protect PDF</a></li>
                    </ul>
                </div>

                <div class="footer-column">
                    <h3>PDF Security</h3>
                    <ul>
                        <li><a href="/tools/unlock-pdf-tool.html">Unlock PDF</a></li>
                        <li><a href="/tools/pdf-protector.html">Protect PDF</a></li>
                        <li><a href="/tools/sign-pdf-tool.html">Sign PDF</a></li>
                        <li><a href="/tools/redact-pdf-tool.html">Redact PDF</a></li>
                        <li><a href="/tools/pdf-comparison-tool.html">Compare PDF</a></li>
                    </ul>
                </div>

                <div class="footer-column">
                    <h3>Company</h3>
                    <ul>
                        <li><a href="/about.html">About Us</a></li>
                        <li><a href="/contact.html">Contact</a></li>
                        <li><a href="/privacy.html">Privacy Policy</a></li>
                        <li><a href="/terms.html">Terms of Service</a></li>
                        <li><a href="/blog.html">Blog</a></li>
                    </ul>
                </div>
            </div>

            <div class="copyright">
                <p>&copy; 2025 EditInSeconds.com. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Set PDF.js worker path
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.worker.min.js';

        // DOM Elements
        const fileInput = document.getElementById('fileInput');
        const uploadArea = document.getElementById('uploadArea');
        const loadingState = document.getElementById('loadingState');
        const previewArea = document.getElementById('previewArea');
        const resultArea = document.getElementById('resultArea');
        const pdfCanvas = document.getElementById('pdf-canvas');
        const cropOverlay = document.getElementById('cropOverlay');
        const currentPageSpan = document.getElementById('current-page');
        const totalPagesSpan = document.getElementById('total-pages');
        const prevPageBtn = document.getElementById('prev-page');
        const nextPageBtn = document.getElementById('next-page');
        const zoomInBtn = document.getElementById('zoom-in');
        const zoomOutBtn = document.getElementById('zoom-out');
        const resetViewBtn = document.getElementById('reset-view');
        const resetCropBtn = document.getElementById('reset-crop');
        const applyCropBtn = document.getElementById('apply-crop');
        const downloadPdfBtn = document.getElementById('download-pdf');
        const downloadLink = document.getElementById('downloadLink');
        const cropTopInput = document.getElementById('crop-top');
        const cropRightInput = document.getElementById('crop-right');
        const cropBottomInput = document.getElementById('crop-bottom');
        const cropLeftInput = document.getElementById('crop-left');
        const manualCropRadio = document.getElementById('manual-crop');
        const marginCropRadio = document.getElementById('margin-crop');
        const applyAllPagesCheckbox = document.getElementById('apply-all-pages');
        const maintainRatioCheckbox = document.getElementById('maintain-ratio');

        // PDF state variables
        let pdfDoc = null;
        let pageNum = 1;
        let pageRendering = false;
        let pageNumPending = null;
        let scale = 1.0;
        let canvas = pdfCanvas.getContext('2d');
        let cropRect = { x: 0, y: 0, width: 0, height: 0 };
        let isDragging = false;
        let isResizing = false;
        let dragStartX, dragStartY;
        let resizeHandle = null;
        let originalCropRect = null;
        let croppedPages = [];
        let pdfFile = null;

        // Initialize the tool
        function initTool() {
            // File input event
            fileInput.addEventListener('change', handleFileSelect);
            
            // Drag and drop events
            uploadArea.addEventListener('dragover', handleDragOver);
            uploadArea.addEventListener('dragleave', handleDragLeave);
            uploadArea.addEventListener('drop', handleFileDrop);
            
            // Page navigation events
            prevPageBtn.addEventListener('click', prevPage);
            nextPageBtn.addEventListener('click', nextPage);
            
            // Zoom events
            zoomInBtn.addEventListener('click', zoomIn);
            zoomOutBtn.addEventListener('click', zoomOut);
            resetViewBtn.addEventListener('click', resetView);
            
            // Crop events
            resetCropBtn.addEventListener('click', resetCrop);
            applyCropBtn.addEventListener('click', applyCrop);
            downloadPdfBtn.addEventListener('click', downloadPdf);
            
            // Crop overlay events
            cropOverlay.addEventListener('mousedown', startDrag);
            document.addEventListener('mousemove', doDrag);
            document.addEventListener('mouseup', stopDrag);
            
            // Crop handle events
            const handles = document.querySelectorAll('.crop-handle');
            handles.forEach(handle => {
                handle.addEventListener('mousedown', startResize);
            });
            
            // Crop method change events
            manualCropRadio.addEventListener('change', toggleCropMethod);
            marginCropRadio.addEventListener('change', toggleCropMethod);
            
            // Crop input events
            cropTopInput.addEventListener('input', updateCropFromInputs);
            cropRightInput.addEventListener('input', updateCropFromInputs);
            cropBottomInput.addEventListener('input', updateCropFromInputs);
            cropLeftInput.addEventListener('input', updateCropFromInputs);
            
            // FAQ accordion
            document.querySelectorAll('.faq-question').forEach(question => {
                question.addEventListener('click', () => {
                    const item = question.parentNode;
                    item.classList.toggle('active');
                });
            });
            
            // Mobile menu toggle
            document.getElementById('mobileMenuBtn').addEventListener('click', function() {
                document.getElementById('mainNav').classList.toggle('active');
            });
            
            // Close mobile menu when clicking outside
            document.addEventListener('click', function(event) {
                const nav = document.getElementById('mainNav');
                const menuBtn = document.getElementById('mobileMenuBtn');
                
                if (!nav.contains(event.target) && !menuBtn.contains(event.target)) {
                    nav.classList.remove('active');
                }
            });
            
            // Smooth scrolling for anchor links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    
                    const targetId = this.getAttribute('href');
                    if(targetId === '#') return;
                    
                    const targetElement = document.querySelector(targetId);
                    if(targetElement) {
                        window.scrollTo({
                            top: targetElement.offsetTop - 100,
                            behavior: 'smooth'
                        });
                    }
                });
            });
        }

        // File selection handler
        function handleFileSelect(event) {
            const file = event.target.files[0];
            if (file && file.type === 'application/pdf') {
                pdfFile = file;
                processPdfFile(file);
            } else {
                alert('Please select a valid PDF file.');
                fileInput.value = '';
            }
        }

        // Drag over handler
        function handleDragOver(event) {
            event.preventDefault();
            event.stopPropagation();
            uploadArea.classList.add('active');
        }

        // Drag leave handler
        function handleDragLeave(event) {
            event.preventDefault();
            event.stopPropagation();
            uploadArea.classList.remove('active');
        }

        // File drop handler
        function handleFileDrop(event) {
            event.preventDefault();
            event.stopPropagation();
            uploadArea.classList.remove('active');
            
            const files = event.dataTransfer.files;
            if (files.length > 0) {
                const file = files[0];
                if (file.type === 'application/pdf') {
                    pdfFile = file;
                    processPdfFile(file);
                } else {
                    alert('Please drop a valid PDF file.');
                }
            }
        }

        // Process PDF file
        function processPdfFile(file) {
            if (file.size > 50 * 1024 * 1024) {
                alert('File size exceeds 50MB limit. Please choose a smaller file.');
                return;
            }
            
            uploadArea.style.display = 'none';
            loadingState.classList.add('active');
            
            const fileReader = new FileReader();
            
            fileReader.onload = function() {
                const typedarray = new Uint8Array(this.result);
                
                pdfjsLib.getDocument(typedarray).promise.then(function(pdf) {
                    pdfDoc = pdf;
                    totalPagesSpan.textContent = pdf.numPages;
                    
                    // Reset state
                    pageNum = 1;
                    scale = 1.0;
                    croppedPages = [];
                    resetCrop();
                    
                    // Render first page
                    renderPage(pageNum);
                    
                    loadingState.classList.remove('active');
                    previewArea.classList.add('active');
                    
                    // Enable page navigation if multiple pages
                    if (pdf.numPages > 1) {
                        prevPageBtn.disabled = true;
                        nextPageBtn.disabled = false;
                    }
                }).catch(function(error) {
                    console.error('Error loading PDF:', error);
                    alert('Error loading PDF file. Please try another file.');
                    resetTool();
                });
            };
            
            fileReader.readAsArrayBuffer(file);
        }

        // Render PDF page
        function renderPage(num) {
            pageRendering = true;
            
            pdfDoc.getPage(num).then(function(page) {
                const viewport = page.getViewport({ scale: scale });
                pdfCanvas.height = viewport.height;
                pdfCanvas.width = viewport.width;
                
                const renderContext = {
                    canvasContext: canvas,
                    viewport: viewport
                };
                
                const renderTask = page.render(renderContext);
                
                renderTask.promise.then(function() {
                    pageRendering = false;
                    
                    if (pageNumPending !== null) {
                        renderPage(pageNumPending);
                        pageNumPending = null;
                    }
                    
                    // Initialize crop overlay
                    initCropOverlay();
                });
            });
            
            currentPageSpan.textContent = num;
        }

        // Queue rendering of page
        function queueRenderPage(num) {
            if (pageRendering) {
                pageNumPending = num;
            } else {
                renderPage(num);
            }
        }

        // Previous page
        function prevPage() {
            if (pageNum <= 1) return;
            pageNum--;
            queueRenderPage(pageNum);
            updatePageButtons();
        }

        // Next page
        function nextPage() {
            if (pageNum >= pdfDoc.numPages) return;
            pageNum++;
            queueRenderPage(pageNum);
            updatePageButtons();
        }

        // Update page navigation buttons
        function updatePageButtons() {
            prevPageBtn.disabled = pageNum <= 1;
            nextPageBtn.disabled = pageNum >= pdfDoc.numPages;
        }

        // Zoom in
        function zoomIn() {
            scale += 0.1;
            queueRenderPage(pageNum);
        }

        // Zoom out
        function zoomOut() {
            if (scale <= 0.2) return;
            scale -= 0.1;
            queueRenderPage(pageNum);
        }

        // Reset view
        function resetView() {
            scale = 1.0;
            queueRenderPage(pageNum);
        }

        // Initialize crop overlay
        function initCropOverlay() {
            const canvasRect = pdfCanvas.getBoundingClientRect();
            const cropWidth = canvasRect.width * 0.8;
            const cropHeight = canvasRect.height * 0.8;
            const cropX = (canvasRect.width - cropWidth) / 2;
            const cropY = (canvasRect.height - cropHeight) / 2;
            
            cropRect = {
                x: cropX,
                y: cropY,
                width: cropWidth,
                height: cropHeight
            };
            
            originalCropRect = {...cropRect};
            
            updateCropOverlay();
            updateCropInputs();
        }

        // Update crop overlay position and size
        function updateCropOverlay() {
            cropOverlay.style.display = 'block';
            cropOverlay.style.left = cropRect.x + 'px';
            cropOverlay.style.top = cropRect.y + 'px';
            cropOverlay.style.width = cropRect.width + 'px';
            cropOverlay.style.height = cropRect.height + 'px';
        }

        // Update crop inputs from crop rectangle
        function updateCropInputs() {
            const canvasRect = pdfCanvas.getBoundingClientRect();
            
            cropTopInput.value = Math.round(cropRect.y);
            cropRightInput.value = Math.round(canvasRect.width - (cropRect.x + cropRect.width));
            cropBottomInput.value = Math.round(canvasRect.height - (cropRect.y + cropRect.height));
            cropLeftInput.value = Math.round(cropRect.x);
        }

        // Update crop rectangle from inputs
        function updateCropFromInputs() {
            if (!marginCropRadio.checked) return;
            
            const canvasRect = pdfCanvas.getBoundingClientRect();
            
            const top = parseInt(cropTopInput.value) || 0;
            const right = parseInt(cropRightInput.value) || 0;
            const bottom = parseInt(cropBottomInput.value) || 0;
            const left = parseInt(cropLeftInput.value) || 0;
            
            cropRect.x = left;
            cropRect.y = top;
            cropRect.width = canvasRect.width - left - right;
            cropRect.height = canvasRect.height - top - bottom;
            
            // Maintain aspect ratio if checked
            if (maintainRatioCheckbox.checked && originalCropRect) {
                const originalRatio = originalCropRect.width / originalCropRect.height;
                const newRatio = cropRect.width / cropRect.height;
                
                if (newRatio > originalRatio) {
                    // Width is too large, adjust height
                    cropRect.height = cropRect.width / originalRatio;
                    cropRect.y = (canvasRect.height - cropRect.height) / 2;
                } else {
                    // Height is too large, adjust width
                    cropRect.width = cropRect.height * originalRatio;
                    cropRect.x = (canvasRect.width - cropRect.width) / 2;
                }
                
                // Update inputs to reflect changes
                updateCropInputs();
            }
            
            updateCropOverlay();
        }

        // Start dragging crop overlay
        function startDrag(event) {
            if (manualCropRadio.checked && event.target === cropOverlay) {
                isDragging = true;
                dragStartX = event.clientX - cropRect.x;
                dragStartY = event.clientY - cropRect.y;
                cropOverlay.style.cursor = 'grabbing';
                event.preventDefault();
            }
        }

        // Perform dragging
        function doDrag(event) {
            if (!isDragging) return;
            
            const canvasRect = pdfCanvas.getBoundingClientRect();
            
            let newX = event.clientX - dragStartX;
            let newY = event.clientY - dragStartY;
            
            // Constrain to canvas bounds
            newX = Math.max(0, Math.min(newX, canvasRect.width - cropRect.width));
            newY = Math.max(0, Math.min(newY, canvasRect.height - cropRect.height));
            
            cropRect.x = newX;
            cropRect.y = newY;
            
            updateCropOverlay();
            updateCropInputs();
        }

        // Stop dragging
        function stopDrag() {
            isDragging = false;
            cropOverlay.style.cursor = 'move';
        }

        // Start resizing crop overlay
        function startResize(event) {
            if (manualCropRadio.checked) {
                isResizing = true;
                resizeHandle = event.target.classList[1];
                dragStartX = event.clientX;
                dragStartY = event.clientY;
                
                // Store original crop rectangle
                originalCropRect = {...cropRect};
                
                event.preventDefault();
            }
        }

        // Perform resizing (handled in doDrag)
        function doResize(event) {
            if (!isResizing) return;
            
            const canvasRect = pdfCanvas.getBoundingClientRect();
            const deltaX = event.clientX - dragStartX;
            const deltaY = event.clientY - dragStartY;
            
            let newRect = {...originalCropRect};
            
            switch(resizeHandle) {
                case 'handle-tl':
                    newRect.x = Math.min(originalCropRect.x + deltaX, originalCropRect.x + originalCropRect.width - 10);
                    newRect.y = Math.min(originalCropRect.y + deltaY, originalCropRect.y + originalCropRect.height - 10);
                    newRect.width = originalCropRect.width - (newRect.x - originalCropRect.x);
                    newRect.height = originalCropRect.height - (newRect.y - originalCropRect.y);
                    break;
                case 'handle-tr':
                    newRect.y = Math.min(originalCropRect.y + deltaY, originalCropRect.y + originalCropRect.height - 10);
                    newRect.width = Math.max(10, originalCropRect.width + deltaX);
                    newRect.height = originalCropRect.height - (newRect.y - originalCropRect.y);
                    break;
                case 'handle-bl':
                    newRect.x = Math.min(originalCropRect.x + deltaX, originalCropRect.x + originalCropRect.width - 10);
                    newRect.width = originalCropRect.width - (newRect.x - originalCropRect.x);
                    newRect.height = Math.max(10, originalCropRect.height + deltaY);
                    break;
                case 'handle-br':
                    newRect.width = Math.max(10, originalCropRect.width + deltaX);
                    newRect.height = Math.max(10, originalCropRect.height + deltaY);
                    break;
            }
            
            // Maintain aspect ratio if checked
            if (maintainRatioCheckbox.checked) {
                const originalRatio = originalCropRect.width / originalCropRect.height;
                
                switch(resizeHandle) {
                    case 'handle-tl':
                    case 'handle-br':
                        if (newRect.width / newRect.height > originalRatio) {
                            newRect.height = newRect.width / originalRatio;
                            if (resizeHandle === 'handle-tl') {
                                newRect.y = originalCropRect.y + originalCropRect.height - newRect.height;
                            }
                        } else {
                            newRect.width = newRect.height * originalRatio;
                            if (resizeHandle === 'handle-tl') {
                                newRect.x = originalCropRect.x + originalCropRect.width - newRect.width;
                            }
                        }
                        break;
                    case 'handle-tr':
                        newRect.height = newRect.width / originalRatio;
                        newRect.y = originalCropRect.y + originalCropRect.height - newRect.height;
                        break;
                    case 'handle-bl':
                        newRect.width = newRect.height * originalRatio;
                        newRect.x = originalCropRect.x + originalCropRect.width - newRect.width;
                        break;
                }
            }
            
            // Constrain to canvas bounds
            newRect.x = Math.max(0, Math.min(newRect.x, canvasRect.width - 10));
            newRect.y = Math.max(0, Math.min(newRect.y, canvasRect.height - 10));
            newRect.width = Math.min(newRect.width, canvasRect.width - newRect.x);
            newRect.height = Math.min(newRect.height, canvasRect.height - newRect.y);
            
            cropRect = newRect;
            updateCropOverlay();
            updateCropInputs();
        }

        // Combined drag and resize handler
        function doDrag(event) {
            if (isDragging) {
                const canvasRect = pdfCanvas.getBoundingClientRect();
                
                let newX = event.clientX - dragStartX;
                let newY = event.clientY - dragStartY;
                
                // Constrain to canvas bounds
                newX = Math.max(0, Math.min(newX, canvasRect.width - cropRect.width));
                newY = Math.max(0, Math.min(newY, canvasRect.height - cropRect.height));
                
                cropRect.x = newX;
                cropRect.y = newY;
                
                updateCropOverlay();
                updateCropInputs();
            } else if (isResizing) {
                doResize(event);
            }
        }

        // Toggle crop method
        function toggleCropMethod() {
            if (manualCropRadio.checked) {
                cropOverlay.style.display = 'block';
                cropTopInput.disabled = true;
                cropRightInput.disabled = true;
                cropBottomInput.disabled = true;
                cropLeftInput.disabled = true;
            } else {
                cropOverlay.style.display = 'none';
                cropTopInput.disabled = false;
                cropRightInput.disabled = false;
                cropBottomInput.disabled = false;
                cropLeftInput.disabled = false;
            }
        }

        // Reset crop
        function resetCrop() {
            initCropOverlay();
            downloadPdfBtn.disabled = true;
        }

        // Apply crop
        function applyCrop() {
            loadingState.classList.add('active');
            
            // Store crop data for current page
            const canvasRect = pdfCanvas.getBoundingClientRect();
            const cropData = {
                page: pageNum,
                x: cropRect.x / canvasRect.width,
                y: cropRect.y / canvasRect.height,
                width: cropRect.width / canvasRect.width,
                height: cropRect.height / canvasRect.height
            };
            
            croppedPages[pageNum - 1] = cropData;
            
            // If apply to all pages is checked, apply to all pages
            if (applyAllPagesCheckbox.checked) {
                for (let i = 0; i < pdfDoc.numPages; i++) {
                    if (i !== pageNum - 1) {
                        croppedPages[i] = {...cropData};
                    }
                }
            }
            
            // Simulate processing delay
            setTimeout(function() {
                loadingState.classList.remove('active');
                previewArea.classList.remove('active');
                resultArea.classList.add('active');
                downloadPdfBtn.disabled = false;
                
                // Scroll to result area
                resultArea.scrollIntoView({ behavior: 'smooth' });
            }, 1500);
        }

        // Download PDF
        function downloadPdf() {
            loadingState.classList.add('active');
            
            // Create a new PDF with cropped pages
            createCroppedPdf().then(function(pdfBlob) {
                loadingState.classList.remove('active');
                
                // Create download link
                const url = URL.createObjectURL(pdfBlob);
                downloadLink.href = url;
                downloadLink.download = 'cropped-document.pdf';
                
                // Trigger download
                downloadLink.click();
                
                // Clean up
                setTimeout(function() {
                    URL.revokeObjectURL(url);
                }, 100);
                
                // Track download for analytics
                console.log('PDF downloaded with crop settings');
            }).catch(function(error) {
                console.error('Error creating cropped PDF:', error);
                loadingState.classList.remove('active');
                alert('Error creating cropped PDF. Please try again.');
            });
        }

        // Create cropped PDF
        async function createCroppedPdf() {
            const { jsPDF } = window.jspdf;
            const pdf = new jsPDF();
            
            // Process each page
            for (let i = 0; i < pdfDoc.numPages; i++) {
                const pageNum = i + 1;
                const page = await pdfDoc.getPage(pageNum);
                const viewport = page.getViewport({ scale: 1.0 });
                
                // Create canvas for page
                const canvas = document.createElement('canvas');
                const context = canvas.getContext('2d');
                canvas.width = viewport.width;
                canvas.height = viewport.height;
                
                // Render page to canvas
                await page.render({
                    canvasContext: context,
                    viewport: viewport
                }).promise;
                
                // Get crop data for this page
                const cropData = croppedPages[i] || {
                    x: 0, y: 0, width: 1, height: 1
                };
                
                // Calculate crop coordinates
                const cropX = cropData.x * canvas.width;
                const cropY = cropData.y * canvas.height;
                const cropWidth = cropData.width * canvas.width;
                const cropHeight = cropData.height * canvas.height;
                
                // Create cropped canvas
                const croppedCanvas = document.createElement('canvas');
                const croppedContext = croppedCanvas.getContext('2d');
                croppedCanvas.width = cropWidth;
                croppedCanvas.height = cropHeight;
                
                // Draw cropped portion
                croppedContext.drawImage(
                    canvas,
                    cropX, cropY, cropWidth, cropHeight,
                    0, 0, cropWidth, cropHeight
                );
                
                // Convert to image data
                const imgData = croppedCanvas.toDataURL('image/jpeg', 0.9);
                
                // Add page to PDF (except first page which is created automatically)
                if (i > 0) {
                    pdf.addPage();
                }
                
                // Add image to PDF
                pdf.addImage(imgData, 'JPEG', 0, 0, pdf.internal.pageSize.getWidth(), pdf.internal.pageSize.getHeight());
            }
            
            // Generate PDF blob
            return pdf.output('blob');
        }

        // Reset tool to initial state
        function resetTool() {
            fileInput.value = '';
            uploadArea.style.display = 'block';
            loadingState.classList.remove('active');
            previewArea.classList.remove('active');
            resultArea.classList.remove('active');
            pdfDoc = null;
            downloadPdfBtn.disabled = true;
        }

        // Initialize the tool when DOM is loaded
        document.addEventListener('DOMContentLoaded', initTool);
    </script>
</body>
</html>
