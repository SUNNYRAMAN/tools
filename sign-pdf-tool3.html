# Writing the full HTML/JS/CSS content to a text file so the user can download it.
content = r"""<!DOCTYPE html>
<html lang="en" itemscope itemtype="https://schema.org/WebApplication">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Edit PDF — Online Edit & Signature Tool | EditInSeconds</title>
<meta name="description" content="Powerful online Edit PDF tool — draw, type, upload signatures, place & resize them, and download a valid edited PDF. Runs fully in your browser using PDF.js and pdf-lib." />
<!-- NOTE: Below keywords list intentionally large for on-page SEO per request (trim if needed). -->
<meta name="keywords" content="sign pdf,edit pdf,online pdf editor,draw signature,upload signature,add signature to pdf,type signature,pdf editor online,edit pdf online,sign document online,pdf sign tool,pdf-lib,pdf.js,online pdf,free pdf editor,compress pdf,merge pdf,split pdf,pdf tools,pdf security,edit pdf pages,annotate pdf,stamp pdf,watermark pdf,resizable signature,draggable signature,pdf to jpg,ocr pdf,repair pdf,legal signature,digital signature,free esignature,sign pdf without registration,editable pdf,fill pdf forms,fillable pdf,autosave pdf,client-side pdf,secure pdf tools,convert to pdf,convert from pdf,pdf annotations,position signature,rotate pdf,page numbers,add text to pdf,draw on pdf,handwritten signature,stylus signature,finger signature,tablet signature,desktop signature,add image to pdf,embed image in pdf,download pdf,valid pdf download,open pdf in viewer,pdf thumbnails,thumbnail preview,seo optimized pdf tool,ad placeholder,adsense ready,ad slots,responsive pdf editor,mobile pdf editor,tablet pdf editor,keyboard accessible,aria friendly,performance optimized,fast pdf editing,privacy first,pdf never uploaded,local processing,client side processing" />
<meta name="robots" content="index,follow" />
<link rel="canonical" href="https://www.editinseconds.com/tools/edit-pdf-tool.html" />

<!-- Open Graph -->
<meta property="og:type" content="website" />
<meta property="og:title" content="Edit PDF — Online Edit & Signature Tool | EditInSeconds" />
<meta property="og:description" content="Add signatures, text, images and edit PDFs directly in your browser. No upload to server — everything happens client-side." />
<meta property="og:image" content="https://www.editinseconds.com/images/edit-pdf-og.png" />

<!-- Fonts & Icons -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Dancing+Script&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

<!-- External libs: pdf.js and pdf-lib -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.9.179/pdf.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.20.0/pdf-lib.min.js"></script>

<style>
:root{
  --primary:#4361ee;--accent:#f72585;--bg:#f5f7ff;--card:#fff;--muted:#6c757d;
  --radius:12px;--shadow:0 10px 30px rgba(0,0,0,0.08);
  font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;
}
*{box-sizing:border-box}
body{margin:0;background:var(--bg);color:#111;line-height:1.5}
.container{max-width:1200px;margin:0 auto;padding:20px}

/* Header */
header{background:linear-gradient(135deg,var(--primary),#7209b7);color:white;padding:18px 0;position:sticky;top:0;z-index:1000}
.header-inner{display:flex;align-items:center;gap:20px;justify-content:space-between}
.logo{font-weight:700;font-size:1.25rem;display:flex;gap:10px;align-items:center}
.logo i{color:var(--accent);font-size:1.3rem}
nav ul{display:flex;gap:12px;list-style:none;padding:0;margin:0}
nav a{color:white;text-decoration:none;padding:8px 12px;border-radius:8px;display:inline-flex;align-items:center;gap:8px}
nav a:hover{background:rgba(255,255,255,0.06)}
.auth{display:flex;gap:10px;align-items:center}

/* Hero */
.hero{padding:36px 0;text-align:center}
.hero h1{font-size:2rem;margin:0;background:linear-gradient(90deg,var(--primary),#7209b7);-webkit-background-clip:text;background-clip:text;color:transparent}
.hero p{color:var(--muted);margin-top:8px}

/* Editor layout */
.editor-wrap{display:grid;grid-template-columns:320px 1fr;gap:20px;margin-top:20px}
@media(max-width:900px){.editor-wrap{grid-template-columns:1fr}}

/* Left toolbar */
.panel{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:16px}
.tool-group{margin-bottom:16px}
.tools-grid{display:flex;flex-wrap:wrap;gap:8px}
.tool-btn{padding:10px;background:#f8f9fa;border-radius:10px;border:1px solid #e9eefb;cursor:pointer;min-width:80px;text-align:center}
.tool-btn.active{outline:2px solid var(--primary);background:linear-gradient(90deg,#eef3ff,#f7eefc)}

/* Canvas area */
.canvas-area{background:linear-gradient(180deg,#eef2ff,#ffffff);border-radius:var(--radius);box-shadow:var(--shadow);padding:12px;min-height:600px;display:flex;flex-direction:column}
.toolbar-top{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
.canvas-scroll{flex:1;overflow:auto;padding:12px;display:flex;flex-direction:column;align-items:center;gap:18px}
.page-frame{background:white;border-radius:6px;box-shadow:0 6px 18px rgba(0,0,0,0.08);position:relative}
.page-canvas{display:block;max-width:100%;height:auto}
.overlay-layer{position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none}

/* Signature element */
.sig-item{position:absolute;touch-action:none;display:flex;align-items:center;justify-content:center;cursor:move;border:2px dashed transparent}
.sig-item.selected{border-color:var(--primary);box-shadow:0 6px 20px rgba(67,97,238,0.12)}
.resize-handle{position:absolute;width:10px;height:10px;background:var(--primary);border-radius:50%}
.resize-handle.br{right:-6px;bottom:-6px;cursor:se-resize}

/* Controls */
.btn{padding:8px 12px;border-radius:10px;border:none;cursor:pointer}
.btn.primary{background:var(--accent);color:white}
.btn.ghost{background:transparent;border:1px solid #ddd}

/* Small UI */
.small{font-size:0.9rem;color:var(--muted)}
.ad-slot{background:#fff;border-radius:10px;padding:10px;border:1px dashed #e0e0e0;text-align:center;margin:12px 0}

/* Footer */
.footer{margin-top:28px;padding:20px 0;text-align:center;color:var(--muted)}
</style>
</head>
<body>
<header>
  <div class="container header-inner">
    <div class="logo"><i class="fas fa-tools"></i><span>EditInSeconds</span></div>
    <nav>
      <ul>
        <li><a href="/tools.html"><i class="fas fa-th"></i> All Tools</a></li>
        <li><a href="/tools/edit-pdf-tool.html"><i class="fas fa-edit"></i> Edit PDF</a></li>
        <li><a href="/tools/sign-pdf-tool.html"><i class="fas fa-signature"></i> Sign</a></li>
      </ul>
    </nav>
    <div class="auth">
      <a class="btn ghost" href="/tools/unlock-pdf-tool.html">Unlock</a>
      <a class="btn primary" href="/tools/pdf-repair-tool.html">Repair</a>
    </div>
  </div>
</header>

<main class="container">
  <section class="hero">
    <h1>Edit PDF — Add signatures & export a valid PDF</h1>
    <p class="small">Client-side PDF editing using PDF.js + pdf-lib. Your files never leave your browser.</p>
  </section>

  <div class="editor-wrap">
    <!-- Left panel -->
    <aside class="panel" aria-label="Tools and options">
      <div class="tool-group">
        <label class="small">Upload PDF</label><br/>
        <input type="file" id="pdfFile" accept="application/pdf" />
        <div id="fileInfo" class="small" style="margin-top:8px"></div>
      </div>

      <div class="tool-group">
        <div class="tool-group-title small">Signature Methods</div>
        <div class="tools-grid">
          <div class="tool-btn active" data-tool="draw" id="btnDraw"><i class="fas fa-pen"></i><div class="small">Draw</div></div>
          <div class="tool-btn" data-tool="type" id="btnType"><i class="fas fa-font"></i><div class="small">Type</div></div>
          <div class="tool-btn" data-tool="upload" id="btnUpload"><i class="fas fa-upload"></i><div class="small">Upload</div></div>
        </div>
      </div>

      <div class="tool-group" id="drawOptionsBox">
        <label class="small">Draw Signature</label>
        <div style="margin-top:8px;background:#fff;border-radius:8px;padding:8px;">
          <canvas id="drawPad" style="width:100%;height:120px;border:1px solid #eee;border-radius:6px;"></canvas>
          <div style="display:flex;gap:8px;margin-top:8px;">
            <input type="color" id="drawColor" value="#000000" style="height:40px"/>
            <input type="range" id="drawWidth" min="1" max="10" value="3" />
            <button class="btn ghost" id="clearDraw">Clear</button>
            <button class="btn primary" id="useDraw">Use</button>
          </div>
        </div>
      </div>

      <div class="tool-group" id="typeOptionsBox" style="display:none">
        <label class="small">Type Signature</label>
        <input type="text" id="typeText" placeholder="Your name" style="width:100%;margin-top:8px;padding:8px;border-radius:8px;border:1px solid #eee"/>
        <div style="display:flex;gap:8px;margin-top:8px;">
          <select id="typeFont"><option>Dancing Script</option><option>Inter</option><option>Arial</option></select>
          <input type="range" id="typeSize" min="18" max="48" value="28"/>
          <input type="color" id="typeColor" value="#000000"/>
        </div>
        <button class="btn primary" id="useType" style="margin-top:8px">Use Typed</button>
      </div>

      <div class="tool-group" id="uploadOptionsBox" style="display:none">
        <label class="small">Upload Signature Image</label>
        <input type="file" id="sigUpload" accept="image/*" style="margin-top:8px"/>
        <div class="small" style="margin-top:8px">Use PNG with transparency for best results.</div>
      </div>

      <div class="ad-slot small">Ad Space — Replace with AdSense code. ID: ADS_TOP</div>

      <div class="tool-group">
        <label class="small">History</label>
        <div id="historyList" style="max-height:140px;overflow:auto;margin-top:8px"></div>
      </div>

      <div class="tool-group">
        <button class="btn primary" id="downloadPdfBtn" style="width:100%">Download Edited PDF</button>
        <div class="small" style="margin-top:8px">Processed locally — the resulting PDF should open in standard viewers.</div>
      </div>
    </aside>

    <!-- Canvas / preview -->
    <section class="canvas-area" aria-live="polite">
      <div class="toolbar-top">
        <div><strong id="docTitle">No document loaded</strong></div>
        <div>
          <button class="btn ghost" id="zoomOut">-</button>
          <button class="btn ghost" id="zoomIn">+</button>
          <button class="btn ghost" id="resetView">Reset</button>
        </div>
      </div>

      <div class="canvas-scroll" id="pagesContainer">
        <!-- pages will be mounted here -->
      </div>

      <div class="ad-slot small">Ad Space — Replace with AdSense code. ID: ADS_MID</div>
    </section>
  </div>

  <div class="footer">
    <div class="small">EditInSeconds © 2025 — Files processed locally. <a href="/privacy.html">Privacy</a> · <a href="/terms.html">TOS</a></div>
  </div>
</main>

<script>
/* ======= Basic variables and elements ======= */
const pdfFileInput = document.getElementById('pdfFile');
const pagesContainer = document.getElementById('pagesContainer');
const fileInfo = document.getElementById('fileInfo');
const docTitle = document.getElementById('docTitle');

const btnDraw = document.getElementById('btnDraw');
const btnType = document.getElementById('btnType');
const btnUpload = document.getElementById('btnUpload');

const drawOptionsBox = document.getElementById('drawOptionsBox');
const typeOptionsBox = document.getElementById('typeOptionsBox');
const uploadOptionsBox = document.getElementById('uploadOptionsBox');

const drawPad = document.getElementById('drawPad');
const drawCtx = drawPad.getContext('2d');
const drawColor = document.getElementById('drawColor');
const drawWidth = document.getElementById('drawWidth');
const clearDraw = document.getElementById('clearDraw');
const useDraw = document.getElementById('useDraw');

const typeText = document.getElementById('typeText');
const typeFont = document.getElementById('typeFont');
const typeSize = document.getElementById('typeSize');
const typeColor = document.getElementById('typeColor');
const useType = document.getElementById('useType');

const sigUpload = document.getElementById('sigUpload');

const historyList = document.getElementById('historyList');

const downloadPdfBtn = document.getElementById('downloadPdfBtn');

let pdfBytes = null;
let pdfDocProxy = null;
let renderedPages = []; // {pageNumber, canvas, width, height, scale, pageViewport}
let signatures = []; // {id, imgDataUrl, page, x,y,w,h}

/* ======= Initialization ======= */
function init(){
  setupDrawPad();
  setupToolButtons();
  pdfFileInput.addEventListener('change', handlePdfSelect);
  clearDraw.addEventListener('click', clearDrawPad);
  useDraw.addEventListener('click', useDrawSignature);
  useType.addEventListener('click', useTypedSignature);
  sigUpload.addEventListener('change', handleUploadSignature);
  downloadPdfBtn.addEventListener('click', exportPdfWithSignatures);
  document.addEventListener('pointerdown', onPointerDown);
  document.addEventListener('pointermove', onPointerMove);
  document.addEventListener('pointerup', onPointerUp);

  document.getElementById('zoomIn').addEventListener('click', ()=>zoomAll(1.1));
  document.getElementById('zoomOut').addEventListener('click', ()=>zoomAll(0.9));
  document.getElementById('resetView').addEventListener('click', ()=>zoomAll(1,true));
}
init();

/* ======= Tools UI ======= */
function setupToolButtons(){
  [btnDraw,btnType,btnUpload].forEach(btn=>{
    btn.addEventListener('click',()=>{
      document.querySelectorAll('.tool-btn').forEach(b=>b.classList.remove('active'));
      btn.classList.add('active');
      const t = btn.dataset.tool;
      drawOptionsBox.style.display = t==='draw'? 'block':'none';
      typeOptionsBox.style.display = t==='type'? 'block':'none';
      uploadOptionsBox.style.display = t==='upload'? 'block':'none';
    });
  });
}

/* ======= Draw pad ======= */
function setupDrawPad(){
  function resizePad(){ drawPad.width = drawPad.clientWidth; drawPad.height = drawPad.clientHeight; redrawTemp(); }
  window.addEventListener('resize', resizePad);
  resizePad();
  drawCtx.lineJoin = 'round'; drawCtx.lineCap='round';
  let drawing=false; let lastX=0,lastY=0;
  drawPad.addEventListener('pointerdown',(e)=>{drawing=true; [lastX,lastY]=getPointerPos(e);});
  drawPad.addEventListener('pointermove',(e)=>{ if(!drawing) return; const [x,y]=getPointerPos(e); drawCtx.strokeStyle=drawColor.value; drawCtx.lineWidth=drawWidth.value; drawCtx.beginPath(); drawCtx.moveTo(lastX,lastY); drawCtx.lineTo(x,y); drawCtx.stroke(); [lastX,lastY]=[x,y];});
  drawPad.addEventListener('pointerup',()=>{drawing=false;});
  drawPad.addEventListener('pointerleave',()=>{drawing=false;});
}

function getPointerPos(e){
  const rect = drawPad.getBoundingClientRect();
  return [ (e.clientX - rect.left) * (drawPad.width/rect.width) , (e.clientY - rect.top) * (drawPad.height/rect.height) ];
}
function clearDrawPad(){ drawCtx.clearRect(0,0,drawPad.width,drawPad.height); }
function redrawTemp(){ /* placeholder if we keep strokes */ }

/* ======= Page rendering using PDF.js ======= */
pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.9.179/pdf.worker.min.js';

async function handlePdfSelect(e){
  const f = e.target.files[0];
  if(!f) return;
  if(f.type !== 'application/pdf'){ alert('Please select a PDF file'); return; }
  fileInfo.textContent = `${f.name} — ${(f.size/1024/1024).toFixed(2)} MB`;
  docTitle.textContent = f.name;
  pdfBytes = await f.arrayBuffer();
  await loadAndRenderPdf(pdfBytes);
}

async function loadAndRenderPdf(bytes){
  pagesContainer.innerHTML = '';
  renderedPages = [];
  const loadingTask = pdfjsLib.getDocument({data:bytes});
  pdfDocProxy = await loadingTask.promise;
  const num = pdfDocProxy.numPages;
  for(let i=1;i<=num;i++){
    const page = await pdfDocProxy.getPage(i);
    const viewport = page.getViewport({scale:1.2});
    const canvas = document.createElement('canvas');
    canvas.className='page-canvas';
    canvas.width = Math.floor(viewport.width);
    canvas.height = Math.floor(viewport.height);
    const ctx = canvas.getContext('2d');
    await page.render({canvasContext:ctx,viewport}).promise;
    const frame = document.createElement('div');
    frame.className='page-frame';
    frame.style.width = (viewport.width)+'px';
    frame.style.height = (viewport.height)+'px';
    frame.dataset.page = i;
    frame.appendChild(canvas);

    // overlay for signatures
    const overlay = document.createElement('div');
    overlay.className='overlay-layer';
    overlay.style.pointerEvents='auto';
    overlay.style.width='100%'; overlay.style.height='100%';
    overlay.style.left=0; overlay.style.top=0; overlay.style.position='absolute';
    frame.appendChild(overlay);

    pagesContainer.appendChild(frame);
    renderedPages.push({pageNumber:i, canvas, width:viewport.width, height:viewport.height, viewport, overlay});
  }
  // reset existing signatures array and UI history
  signatures = [];
  historyList.innerHTML = '';
}

/* ======= Signature placement UI ======= */
function createSignatureElement(imgDataUrl, pageNum, widthPx = 200, heightPx = 60){
  const target = renderedPages.find(p=>p.pageNumber===pageNum);
  if(!target) pageNum = renderedPages[0].pageNumber;
  const el = document.createElement('div');
  el.className='sig-item';
  el.style.width = widthPx+'px';
  el.style.height = heightPx+'px';
  el.style.left = '20px';
  el.style.top = '20px';
  el.style.position='absolute';
  el.dataset.page = pageNum;
  el.innerHTML = `<img src="${imgDataUrl}" style="width:100%;height:100%;object-fit:contain;display:block"/> <div class="resize-handle br"></div>`;
  // append to overlay of page
  const pageObj = renderedPages.find(p=>p.pageNumber==pageNum);
  pageObj.overlay.appendChild(el);
  enableDragResize(el);
  const id = 'sig_'+(Date.now());
  signatures.push({id, el, imgDataUrl, page:pageNum});
  addHistoryItem(id,imgDataUrl);
  return id;
}

/* Drag & resize behaviour */
let dragState = null;
function enableDragResize(el){
  el.addEventListener('pointerdown', (e)=>{
    e.stopPropagation();
    selectSignature(el);
    const rect = el.getBoundingClientRect();
    const pageRect = el.parentElement.getBoundingClientRect();
    const offsetX = e.clientX - rect.left;
    const offsetY = e.clientY - rect.top;
    // detect if clicked on resize handle
    if(e.target.classList.contains('resize-handle')){
      dragState = {type:'resize',el, startW:rect.width, startH:rect.height, startX:e.clientX, startY:e.clientY};
    } else {
      dragState = {type:'drag',el, offsetX, offsetY, pageRect};
    }
  });
}

function onPointerDown(e){
  // clicking outside should deselect
  if(!e.target.closest('.sig-item')){ clearSelection(); }
}
function onPointerMove(e){
  if(!dragState) return;
  const el = dragState.el;
  if(dragState.type==='drag'){
    const parentRect = el.parentElement.getBoundingClientRect();
    const left = e.clientX - parentRect.left - dragState.offsetX;
    const top = e.clientY - parentRect.top - dragState.offsetY;
    el.style.left = Math.max(0, left) + 'px';
    el.style.top = Math.max(0, top) + 'px';
  } else if(dragState.type==='resize'){
    const dx = e.clientX - dragState.startX;
    const dy = e.clientY - dragState.startY;
    el.style.width = Math.max(20, dragState.startW + dx) + 'px';
    el.style.height = Math.max(10, dragState.startH + dy) + 'px';
  }
}
function onPointerUp(e){ dragState = null; }

function selectSignature(el){
  document.querySelectorAll('.sig-item').forEach(s=>s.classList.remove('selected'));
  el.classList.add('selected');
}
function clearSelection(){ document.querySelectorAll('.sig-item').forEach(s=>s.classList.remove('selected')); }

/* ======= Use signatures from various inputs ======= */
function useDrawSignature(){
  const dataUrl = drawPad.toDataURL('image/png');
  if(!renderedPages.length){ alert('Load a PDF first'); return; }
  createSignatureElement(dataUrl, renderedPages[0].pageNumber, 240, 80);
}
function useTypedSignature(){
  const text = typeText.value.trim();
  if(!text){ alert('Enter text'); return; }
  // render text to canvas
  const c = document.createElement('canvas'); c.width=600; c.height=200;
  const ctx = c.getContext('2d');
  ctx.fillStyle='transparent'; ctx.clearRect(0,0,c.width,c.height);
  ctx.font = `${typeSize.value}px ${typeFont.value}, cursive`;
  ctx.fillStyle = typeColor.value;
  ctx.textBaseline='middle';
  ctx.fillText(text, 20, c.height/2);
  const url = c.toDataURL('image/png');
  createSignatureElement(url, renderedPages[0].pageNumber, 260, 90);
}

function handleUploadSignature(e){
  const f = e.target.files[0];
  if(!f) return;
  const reader = new FileReader();
  reader.onload = function(ev){
    const url = ev.target.result;
    createSignatureElement(url, renderedPages[0].pageNumber, 260, 90);
  };
  reader.readAsDataURL(f);
}

/* ======= History UI ======= */
function addHistoryItem(id, dataUrl){
  const div = document.createElement('div');
  div.style.display='flex'; div.style.gap='8px'; div.style.alignItems='center'; div.style.marginBottom='8px';
  const img = document.createElement('img'); img.src = dataUrl; img.style.width='48px'; img.style.height='24px'; img.style.objectFit='contain';
  const btnUse = document.createElement('button'); btnUse.className='btn ghost'; btnUse.textContent='Place'; btnUse.addEventListener('click',()=>{ createSignatureElement(dataUrl, renderedPages[0].pageNumber, 220, 70);});
  const btnRemove = document.createElement('button'); btnRemove.className='btn'; btnRemove.textContent='Remove'; btnRemove.addEventListener('click',()=>{
    // remove from signatures and UI
    signatures = signatures.filter(s=>s.imgDataUrl!==dataUrl);
    div.remove();
  });
  div.appendChild(img); div.appendChild(btnUse); div.appendChild(btnRemove);
  historyList.prepend(div);
}

/* ======= Export: embed images into PDF using pdf-lib ======= */
async function exportPdfWithSignatures(){
  if(!pdfBytes){ alert('Load a PDF first'); return; }
  try{
    downloadPdfBtn.disabled = true; downloadPdfBtn.textContent='Processing...';
    const pdfDoc = await PDFLib.PDFDocument.load(pdfBytes);
    for(const sig of signatures){
      // find latest position from DOM element
      const dom = sig.el;
      if(!dom) continue;
      const pageNum = parseInt(dom.dataset.page);
      const pageObj = renderedPages.find(p=>p.pageNumber===pageNum);
      if(!pageObj) continue;
      // compute coordinates relative to PDF page size (pdf-lib uses points where the origin is bottom-left)
      const pageCanvas = pageObj.canvas;
      const canvasRect = pageCanvas.getBoundingClientRect();
      const elRect = dom.getBoundingClientRect();
      const scaleX = pageObj.width / canvasRect.width;
      const scaleY = pageObj.height / canvasRect.height;

      const x = (elRect.left - canvasRect.left) * scaleX;
      const y_from_top = (elRect.top - canvasRect.top) * scaleY;
      const w = elRect.width * scaleX;
      const h = elRect.height * scaleY;

      const pdfPage = pdfDoc.getPage(pageNum-1);
      // pdf-lib y origin is bottom
      const y = pdfPage.getHeight() - y_from_top - h;

      // embed image
      const imgBytes = await fetch(sig.imgDataUrl).then(r=>r.arrayBuffer());
      let img;
      if(sig.imgDataUrl.indexOf('data:image/png')===0) img = await pdfDoc.embedPng(imgBytes);
      else img = await pdfDoc.embedJpg(imgBytes);
      pdfPage.drawImage(img, {x, y, width: w, height: h});
    }
    const outBytes = await pdfDoc.save();
    const blob = new Blob([outBytes],{type:'application/pdf'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a'); a.href = url; a.download = 'edited-document.pdf'; document.body.appendChild(a); a.click(); a.remove();
    URL.revokeObjectURL(url);
    downloadPdfBtn.textContent='Download Edited PDF';
    downloadPdfBtn.disabled = false;
    alert('PDF exported — open the downloaded file to verify signatures.');
  }catch(err){
    console.error(err);
    alert('Error while exporting PDF: '+err.message);
    downloadPdfBtn.disabled = false;
    downloadPdfBtn.textContent='Download Edited PDF';
  }
}

/* ======= Utilities ======= */
function zoomAll(factor,reset=false){
  renderedPages.forEach(p=>{
    const frame = p.canvas.parentElement;
    if(reset){ frame.style.transform='scale(1)'; frame.style.transformOrigin='top left'; return; }
    const prev = frame.style.transform || 'scale(1)';
    const cur = parseFloat(prev.replace(/[^\d\.]/g,'')) || 1;
    const next = cur * factor;
    frame.style.transform = 'scale(' + next + ')';
  });
}

/* ======= Pointer interactions for empty area (to deselect) handled above ======= */

</script>
</body>
</html>
"""
# write file
path = "/mnt/data/edit-pdf-tool.txt"
with open(path, "w", encoding="utf-8") as f:
    f.write(content)
# return value for user visible
path

