<!DOCTYPE html>
<html lang="en" itemscope itemtype="https://schema.org/WebApplication">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crop PDF Online - Free PDF Cropping Tool | EditInSeconds.com</title>
    <meta name="description" content="Crop PDF files online for free with EditInSeconds.com. Remove unwanted margins, select specific areas, and customize your PDF documents. No registration required.">
    <meta name="keywords" content="crop pdf, crop pdf online, pdf cropper, crop pdf margins, crop pdf pages, pdf editing, pdf tools, online pdf editor, free pdf tools, edit pdf, pdf cropper tool">
    <meta name="author" content="EditInSeconds.com">
    <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
    
    <!-- Schema.org structured data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Crop PDF Tool - EditInSeconds.com",
      "applicationCategory": "UtilitiesApplication",
      "operatingSystem": "Any",
      "description": "Free online PDF cropping tool to remove margins and select specific areas",
      "url": "https://www.EditInSeconds.com/tools/crop-pdf-tool.html",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "author": {
        "@type": "Organization",
        "name": "EditInSeconds.com"
      }
    }
    </script>
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.EditInSeconds.com/tools/crop-pdf-tool.html">
    <meta property="og:title" content="Crop PDF Online - Free PDF Cropping Tool | EditInSeconds.com">
    <meta property="og:description" content="Crop PDF files online for free. Remove unwanted margins, select specific areas, and customize your PDF documents. No registration required.">
    <meta property="og:image" content="https://www.EditInSeconds.com/images/crop-pdf-og-image.jpg">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://www.EditInSeconds.com/tools/crop-pdf-tool.html">
    <meta property="twitter:title" content="Crop PDF Online - Free PDF Cropping Tool | EditInSeconds.com">
    <meta property="twitter:description" content="Crop PDF files online for free. Remove unwanted margins, select specific areas, and customize your PDF documents.">
    <meta property="twitter:image" content="https://www.EditInSeconds.com/images/crop-pdf-twitter-image.jpg">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://www.EditInSeconds.com/tools/crop-pdf-tool.html">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    
    <!-- Preload critical resources -->
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"></noscript>
    
    <!-- Preconnect to external domains -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- PDF.js library for PDF rendering -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js"></script>
    
    <!-- jsPDF for PDF generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    
    <style>
        :root {
            --primary: #4361ee;
            --primary-dark: #3a56d4;
            --secondary: #7209b7;
            --accent: #f72585;
            --light: #f8f9fa;
            --dark: #212529;
            --gray: #6c757d;
            --success: #4cc9f0;
            --border-radius: 12px;
            --box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f7ff;
            color: var(--dark);
            line-height: 1.6;
            font-size: 16px;
            overflow-x: hidden;
        }

        .container {
            width: 100%;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header Styles */
        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.8rem;
            font-weight: 700;
            margin-right: auto;
        }

        .logo i {
            color: var(--accent);
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 1.5rem;
            align-items: center;
        }

        nav a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition);
            padding: 8px 15px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        nav a:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .auth-buttons {
            display: flex;
            gap: 1rem;
            margin-left: auto;
        }

        .btn {
            padding: 0.6rem 1.5rem;
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            border: none;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .btn-outline {
            background: transparent;
            border: 2px solid white;
            color: white;
        }

        .btn-outline:hover {
            background: white;
            color: var(--primary);
        }

        .btn-primary {
            background: var(--accent);
            color: white;
        }

        .btn-primary:hover {
            background: #e11575;
            transform: translateY(-2px);
        }

        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
        }

        /* Dropdown Menu Styles */
        .dropdown {
            position: relative;
        }

        .dropdown-toggle {
            display: flex;
            align-items: center;
            gap: 5px;
            cursor: pointer;
            padding: 8px 15px;
            border-radius: 8px;
            transition: var(--transition);
        }

        .dropdown-toggle:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        .dropdown-menu {
            position: absolute;
            top: 100%;
            left: 0;
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
            padding: 1.5rem;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transform: translateY(15px);
            transition: var(--transition);
            width: 750px;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
            border: 1px solid rgba(0, 0, 0, 0.05);
        }

        .dropdown:hover .dropdown-menu {
            opacity: 1;
            visibility: visible;
            transform: translateY(5px);
        }

        .dropdown-column {
            display: flex;
            flex-direction: column;
        }

        .dropdown-column h4 {
            margin: 0 0 1rem 0;
            font-size: 0.85rem;
            color: var(--primary);
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 700;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid rgba(67, 97, 238, 0.2);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .dropdown-column h4 i {
            font-size: 0.9rem;
        }

        .dropdown-menu a {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 0.6rem 0.8rem;
            color: var(--dark);
            text-decoration: none;
            transition: var(--transition);
            font-size: 0.9rem;
            border-radius: 6px;
            position: relative;
            overflow: hidden;
        }

        .dropdown-menu a:before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 3px;
            background: var(--primary);
            transform: scaleY(0);
            transition: var(--transition);
        }

        .dropdown-menu a:hover {
            background: rgba(67, 97, 238, 0.08);
            color: var(--primary);
            transform: translateX(3px);
        }

        .dropdown-menu a:hover:before {
            transform: scaleY(1);
        }

        .dropdown-menu a i {
            color: var(--primary);
            font-size: 0.9rem;
            width: 16px;
            text-align: center;
        }

        /* Image Tools Dropdown */
        .image-tools-dropdown .dropdown-menu {
            width: 450px;
            grid-template-columns: 1fr;
        }

        .image-tools-dropdown .dropdown-column h4 {
            color: var(--secondary);
            border-bottom: 2px solid rgba(114, 9, 183, 0.2);
        }

        .image-tools-dropdown .dropdown-menu a i {
            color: var(--secondary);
        }

        .image-tools-dropdown .dropdown-menu a:hover {
            background: rgba(114, 9, 183, 0.08);
            color: var(--secondary);
        }

        .image-tools-dropdown .dropdown-menu a:before {
            background: var(--secondary);
        }

        /* Breadcrumb */
        .breadcrumb {
            padding: 1rem 0;
            font-size: 0.9rem;
            color: var(--gray);
        }

        .breadcrumb a {
            color: var(--primary);
            text-decoration: none;
        }

        .breadcrumb a:hover {
            text-decoration: underline;
        }

        /* Tool Hero Section */
        .tool-hero {
            padding: 3rem 0;
            background: linear-gradient(135deg, #f5f7ff 0%, #e6e9ff 100%);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .tool-hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 100" fill="%234361ee" opacity="0.03"><polygon points="0,0 1000,50 1000,100 0,100"/></svg>') no-repeat center bottom;
            background-size: cover;
        }

        .tool-hero h1 {
            font-size: 2.8rem;
            margin-bottom: 1rem;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            line-height: 1.2;
            position: relative;
        }

        .tool-hero p {
            font-size: 1.2rem;
            max-width: 700px;
            margin: 0 auto 2rem;
            color: var(--gray);
            position: relative;
        }

        /* Tool Container */
        .tool-container {
            display: flex;
            flex-direction: column;
            gap: 2rem;
            padding: 2rem 0;
        }

        /* Upload Area */
        .upload-area {
            background: white;
            border-radius: var(--border-radius);
            padding: 2rem;
            box-shadow: var(--box-shadow);
            text-align: center;
            border: 2px dashed #dee2e6;
            transition: var(--transition);
            cursor: pointer;
            position: relative;
        }

        .upload-area:hover {
            border-color: var(--primary);
        }

        .upload-area.active {
            border-color: var(--primary);
            background: rgba(67, 97, 238, 0.05);
        }

        .upload-icon {
            font-size: 3rem;
            color: var(--primary);
            margin-bottom: 1rem;
        }

        .upload-text h3 {
            margin-bottom: 0.5rem;
            color: var(--dark);
        }

        .upload-text p {
            color: var(--gray);
            margin-bottom: 1rem;
        }

        .file-input {
            display: none;
        }

        .upload-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: inline-block;
        }

        .upload-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        /* Tool Interface */
        .tool-interface {
            display: none;
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            overflow: hidden;
        }

        .tool-interface.active {
            display: block;
        }

        .tool-header {
            background: var(--light);
            padding: 1.5rem;
            border-bottom: 1px solid #dee2e6;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .tool-title {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .tool-title i {
            color: var(--primary);
            font-size: 1.2rem;
        }

        .tool-actions {
            display: flex;
            gap: 1rem;
        }

        .tool-body {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            padding: 1.5rem;
        }

        /* Preview Area */
        .preview-area {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .preview-container {
            border: 1px solid #dee2e6;
            border-radius: var(--border-radius);
            overflow: hidden;
            position: relative;
            background: #f8f9fa;
            min-height: 500px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .pdf-preview {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .pdf-canvas-container {
            position: relative;
            margin: 1rem 0;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .pdf-canvas {
            display: block;
            max-width: 100%;
            height: auto;
        }

        .crop-overlay {
            position: absolute;
            border: 2px dashed var(--accent);
            background: rgba(247, 37, 133, 0.1);
            cursor: move;
            z-index: 10;
        }

        .crop-handle {
            position: absolute;
            width: 12px;
            height: 12px;
            background: var(--accent);
            border-radius: 50%;
            z-index: 11;
        }

        .crop-handle.nw {
            top: -6px;
            left: -6px;
            cursor: nw-resize;
        }

        .crop-handle.ne {
            top: -6px;
            right: -6px;
            cursor: ne-resize;
        }

        .crop-handle.sw {
            bottom: -6px;
            left: -6px;
            cursor: sw-resize;
        }

        .crop-handle.se {
            bottom: -6px;
            right: -6px;
            cursor: se-resize;
        }

        /* Controls */
        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            padding: 1rem;
            background: var(--light);
            border-radius: var(--border-radius);
        }

        .control-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            flex: 1;
            min-width: 150px;
        }

        .control-label {
            font-weight: 600;
            color: var(--dark);
            font-size: 0.9rem;
        }

        .control-input {
            padding: 0.6rem;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            font-size: 0.9rem;
            transition: var(--transition);
        }

        .control-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.1);
        }

        .control-select {
            padding: 0.6rem;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            font-size: 0.9rem;
            background: white;
            cursor: pointer;
            transition: var(--transition);
        }

        .control-select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.1);
        }

        .page-controls {
            display: flex;
            align-items: center;
            gap: 1rem;
            justify-content: center;
            margin-top: 1rem;
        }

        .page-btn {
            background: var(--primary);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .page-btn:hover {
            background: var(--primary-dark);
        }

        .page-btn:disabled {
            background: var(--gray);
            cursor: not-allowed;
        }

        .page-info {
            font-weight: 600;
            color: var(--dark);
        }

        /* Processing Area */
        .processing-area {
            display: none;
            background: white;
            border-radius: var(--border-radius);
            padding: 2rem;
            box-shadow: var(--box-shadow);
            text-align: center;
        }

        .processing-area.active {
            display: block;
        }

        .processing-icon {
            font-size: 3rem;
            color: var(--primary);
            margin-bottom: 1rem;
        }

        .processing-text h3 {
            margin-bottom: 0.5rem;
            color: var(--dark);
        }

        .processing-text p {
            color: var(--gray);
            margin-bottom: 1.5rem;
        }

        .progress-bar {
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 1.5rem;
        }

        .progress {
            height: 100%;
            background: var(--primary);
            width: 0%;
            transition: width 0.3s ease;
        }

        /* Results Area */
        .results-area {
            display: none;
            background: white;
            border-radius: var(--border-radius);
            padding: 2rem;
            box-shadow: var(--box-shadow);
            text-align: center;
        }

        .results-area.active {
            display: block;
        }

        .results-icon {
            font-size: 3rem;
            color: var(--success);
            margin-bottom: 1rem;
        }

        .results-text h3 {
            margin-bottom: 0.5rem;
            color: var(--dark);
        }

        .results-text p {
            color: var(--gray);
            margin-bottom: 1.5rem;
        }

        .download-btn {
            background: var(--success);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .download-btn:hover {
            background: #3ab0d9;
            transform: translateY(-2px);
        }

        /* Ad Units */
        .ad-unit {
            background: #f8f9fa;
            border-radius: var(--border-radius);
            padding: 15px;
            margin: 2rem 0;
            text-align: center;
            border: 1px dashed #dee2e6;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 90px;
        }

        .ad-unit.horizontal {
            width: 100%;
        }

        .ad-unit.vertical {
            width: 300px;
            margin: 0 auto;
        }

        .ad-label {
            font-size: 0.8rem;
            color: var(--gray);
            text-transform: uppercase;
            margin-bottom: 5px;
        }

        /* Features Section */
        .features {
            padding: 5rem 0;
            background: white;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }

        .feature-card {
            text-align: center;
            padding: 2rem;
            border-radius: var(--border-radius);
            transition: var(--transition);
        }

        .feature-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
        }

        .feature-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.5rem;
            font-size: 2rem;
            color: white;
        }

        /* FAQ Section */
        .faq-section {
            padding: 5rem 0;
            background: #f8f9fa;
        }

        .faq-item {
            margin-bottom: 1.5rem;
            background: white;
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--box-shadow);
            transition: var(--transition);
        }

        .faq-item:hover {
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .faq-question {
            padding: 1.5rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .faq-answer {
            padding: 0 1.5rem 1.5rem;
            display: none;
        }

        .faq-item.active .faq-answer {
            display: block;
        }

        /* Footer */
        footer {
            background: var(--dark);
            color: white;
            padding: 3rem 0 1.5rem;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .footer-column h3 {
            margin-bottom: 1.5rem;
            font-size: 1.2rem;
        }

        .footer-column ul {
            list-style: none;
        }

        .footer-column ul li {
            margin-bottom: 0.8rem;
        }

        .footer-column a {
            color: #adb5bd;
            text-decoration: none;
            transition: var(--transition);
        }

        .footer-column a:hover {
            color: white;
        }

        .social-links {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }

        .social-links a {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            transition: var(--transition);
        }

        .social-links a:hover {
            background: var(--primary);
            transform: translateY(-3px);
        }

        .copyright {
            text-align: center;
            padding-top: 1.5rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #adb5bd;
            font-size: 0.9rem;
        }

        /* Responsive Styles */
        @media (max-width: 992px) {
            .tool-hero h1 {
                font-size: 2.2rem;
            }
            
            .dropdown-menu {
                width: 550px;
                grid-template-columns: repeat(2, 1fr);
            }
            
            .image-tools-dropdown .dropdown-menu {
                width: 350px;
            }
        }

        @media (max-width: 768px) {
            .header-content {
                flex-wrap: wrap;
            }
            
            .mobile-menu-btn {
                display: block;
            }
            
            nav {
                width: 100%;
                margin-top: 1rem;
                display: none;
            }
            
            nav.active {
                display: block;
            }
            
            nav ul {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .auth-buttons {
                margin-top: 1rem;
                width: 100%;
                justify-content: center;
            }
            
            .tool-hero h1 {
                font-size: 1.8rem;
            }
            
            .dropdown-menu {
                position: static;
                opacity: 1;
                visibility: visible;
                transform: none;
                box-shadow: none;
                background: transparent;
                padding: 0;
                width: 100%;
                grid-template-columns: 1fr;
            }
            
            .dropdown-column h4 {
                color: white;
                border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            }
            
            .dropdown-menu a {
                color: white;
                padding: 0.5rem 0 0.5rem 1rem;
            }
            
            .dropdown-menu a:before {
                display: none;
            }
            
            .image-tools-dropdown .dropdown-menu {
                width: 100%;
            }
            
            .controls {
                flex-direction: column;
            }
            
            .control-group {
                min-width: 100%;
            }
        }

        @media (max-width: 576px) {
            .tool-hero {
                padding: 2rem 0;
            }
            
            .features-grid, .footer-content {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-tools"></i>
                    <span>EditInSeconds.com</span>
                </div>
                
                <button class="mobile-menu-btn" id="mobileMenuBtn" aria-label="Toggle navigation menu">
                    <i class="fas fa-bars"></i>
                </button>
                
                <nav id="mainNav">
                    <ul>
                        <li class="dropdown">
                            <div class="dropdown-toggle">
                                <span>All PDF Tools</span>
                                <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="dropdown-menu">
                                <div class="dropdown-column">
                                    <h4><i class="fas fa-layer-group"></i> ORGANIZE PDF</h4>
                                    <a href="/tools/merge-pdf.html"><i class="fas fa-object-group"></i> Merge PDF</a>
                                    <a href="/tools/split-pdf.html"><i class="fas fa-cut"></i> Split PDF</a>
                                    <a href="/tools/pdf-organize-tool.html"><i class="fas fa-sort"></i> Organize PDF</a>
                                    <a href="/tools/rotate-pdf-tool.html"><i class="fas fa-redo"></i> Rotate PDF</a>
                                    <a href="/tools/page-numbers.html"><i class="fas fa-list-ol"></i> Add Page Numbers</a>
                                </div>
                                
                                <div class="dropdown-column">
                                    <h4><i class="fas fa-rocket"></i> OPTIMIZE PDF</h4>
                                    <a href="/tools/pdf-compressor.html"><i class="fas fa-compress"></i> Compress PDF</a>
                                    <a href="/tools/pdf-repair-tool.html"><i class="fas fa-tools"></i> Repair PDF</a>
                                    <a href="/tools/ocr-pdf-tool.html"><i class="fas fa-eye"></i> OCR PDF</a>
                                </div>
                                
                                <div class="dropdown-column">
                                    <h4><i class="fas fa-file-import"></i> CONVERT TO PDF</h4>
                                    <a href="/tools/jpg-to-pdf-converter.html"><i class="fas fa-file-pdf"></i> JPG to PDF</a>
                                    <a href="/tools/word-to-pdf-converter.html"><i class="fas fa-file-word"></i> Word to PDF</a>
                                    <a href="/tools/powerpoint-to-pdf-converter.html"><i class="fas fa-file-powerpoint"></i> PowerPoint to PDF</a>
                                    <a href="/tools/excel-to-pdf-converter.html"><i class="fas fa-file-excel"></i> Excel to PDF</a>
                                    <a href="/tools/html-to-pdf-converter.html"><i class="fab fa-html5"></i> HTML to PDF</a>
                                    <a href="/tools/scan-to-pdf-tool.html"><i class="fas fa-scanner"></i> Scan to PDF</a>
                                </div>
                                
                                <div class="dropdown-column">
                                    <h4><i class="fas fa-file-export"></i> CONVERT FROM PDF</h4>
                                    <a href="/tools/pdf-to-jpg-converter.html"><i class="fas fa-file-image"></i> PDF to JPG</a>
                                    <a href="/tools/pdf-word-converter.html"><i class="fas fa-file-word"></i> PDF to Word</a>
                                    <a href="/tools/pdf-powerpoint-converter.html"><i class="fas fa-file-powerpoint"></i> PDF to PowerPoint</a>
                                    <a href="/tools/pdf-to-excel-converter.html"><i class="fas fa-file-excel"></i> PDF to Excel</a>
                                </div>
                                
                                <div class="dropdown-column">
                                    <h4><i class="fas fa-edit"></i> EDIT PDF</h4>
                                    <a href="/tools/edit-pdf-tool.html"><i class="fas fa-edit"></i> Edit PDF</a>
                                    <a href="/tools/sign-pdf-tool.html"><i class="fas fa-signature"></i> Sign PDF</a>
                                    <a href="/tools/watermark-tool.html"><i class="fas fa-tint"></i> Watermark PDF</a>
                                    <a href="/tools/crop-pdf-tool.html"><i class="fas fa-crop"></i> Crop PDF</a>
                                    <a href="/tools/redact-pdf-tool.html"><i class="fas fa-eye-slash"></i> Redact PDF</a>
                                    <a href="/tools/pdf-comparison-tool.html"><i class="fas fa-code-compare"></i> Compare PDF</a>
                                </div>
                                
                                <div class="dropdown-column">
                                    <h4><i class="fas fa-shield-alt"></i> PDF SECURITY</h4>
                                    <a href="/tools/unlock-pdf-tool.html"><i class="fas fa-unlock"></i> Unlock PDF</a>
                                    <a href="/tools/pdf-protector.html"><i class="fas fa-lock"></i> Protect PDF</a>
                                </div>
                            </div>
                        </li>
                        <li class="dropdown image-tools-dropdown">
                            <div class="dropdown-toggle">
                                <span>All Image Tools</span>
                                <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="dropdown-menu">
                                <div class="dropdown-column">
                                    <h4><i class="fas fa-image"></i> Image Tools</h4>
                                    <a href="/tools/jpg-to-pdf-converter.html"><i class="fas fa-file-pdf"></i> JPG to PDF</a>
                                    <a href="/tools/pdf-to-jpg-converter.html"><i class="fas fa-file-image"></i> PDF to JPG</a>
                                    <a href="/tools/img-compress.html"><i class="fas fa-compress"></i> Image Compressor</a>
                                    <a href="/tools/img-converter.html"><i class="fas fa-exchange-alt"></i> Image Converter</a>
                                    <a href="/tools/img-resizer.html"><i class="fas fa-expand-alt"></i> Image Resizer</a>
                                    <a href="/tools/crop-img-tool.html"><i class="fas fa-crop-alt"></i> Crop Image</a>
                                    <a href="/tools/watermark-tool.html"><i class="fas fa-tint"></i> Watermark</a>
                                </div>
                            </div>
                        </li>
                    </ul>
                </nav>
                
                <div class="auth-buttons">
                    <a href="/tools/unlock-pdf-tool.html" class="btn btn-outline">Unlock PDF</a>
                    <a href="/tools/pdf-repair-tool.html" class="btn btn-primary">Repair PDF</a>
                </div>
            </div>
        </div>
    </header>

    <!-- Breadcrumb -->
    <div class="container">
        <div class="breadcrumb">
            <a href="/">Home</a> > <a href="/tools.html">All Tools</a> > Crop PDF
        </div>
    </div>

    <!-- Tool Hero Section -->
    <section class="tool-hero">
        <div class="container">
            <h1>Crop PDF Online</h1>
            <p>Remove unwanted margins, select specific areas, and customize your PDF documents with our free online PDF cropping tool.</p>
        </div>
    </section>

    <!-- Ad Unit - Leaderboard -->
    <div class="container">
        <div class="ad-unit horizontal">
            <!-- AdSense Leaderboard Ad -->
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-YOUR_AD_CLIENT_ID"
                 data-ad-slot="YOUR_LEADERBOARD_SLOT_ID"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
            <script>
                 (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>
    </div>

    <!-- Tool Container -->
    <section class="container tool-container">
        <!-- Upload Area -->
        <div class="upload-area" id="uploadArea">
            <div class="upload-icon">
                <i class="fas fa-file-pdf"></i>
            </div>
            <div class="upload-text">
                <h3>Upload PDF to Crop</h3>
                <p>Drag & drop your PDF file here or click to browse</p>
                <p class="file-types">Supported: PDF (Max: 50MB)</p>
            </div>
            <input type="file" id="fileInput" class="file-input" accept=".pdf">
            <button class="upload-btn" id="uploadBtn">Select PDF File</button>
        </div>

        <!-- Tool Interface -->
        <div class="tool-interface" id="toolInterface">
            <div class="tool-header">
                <div class="tool-title">
                    <i class="fas fa-crop"></i>
                    <h2>Crop PDF</h2>
                </div>
                <div class="tool-actions">
                    <button class="btn btn-outline" id="resetBtn">Reset</button>
                    <button class="btn btn-primary" id="cropBtn">Crop PDF</button>
                </div>
            </div>
            <div class="tool-body">
                <div class="preview-area">
                    <div class="preview-container" id="previewContainer">
                        <div class="pdf-preview" id="pdfPreview">
                            <p>Loading PDF preview...</p>
                        </div>
                    </div>
                    
                    <div class="controls">
                        <div class="control-group">
                            <label class="control-label">Crop Mode</label>
                            <select class="control-select" id="cropMode">
                                <option value="manual">Manual Selection</option>
                                <option value="margins">Remove Margins</option>
                                <option value="custom">Custom Margins</option>
                            </select>
                        </div>
                        
                        <div class="control-group" id="marginsGroup">
                            <label class="control-label">Margin (inches)</label>
                            <input type="number" class="control-input" id="marginSize" min="0" max="5" step="0.1" value="0.5">
                        </div>
                        
                        <div class="control-group" id="customMarginsGroup" style="display: none;">
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                                <div>
                                    <label class="control-label">Top (in)</label>
                                    <input type="number" class="control-input" id="marginTop" min="0" max="5" step="0.1" value="0.5">
                                </div>
                                <div>
                                    <label class="control-label">Right (in)</label>
                                    <input type="number" class="control-input" id="marginRight" min="0" max="5" step="0.1" value="0.5">
                                </div>
                                <div>
                                    <label class="control-label">Bottom (in)</label>
                                    <input type="number" class="control-input" id="marginBottom" min="0" max="5" step="0.1" value="0.5">
                                </div>
                                <div>
                                    <label class="control-label">Left (in)</label>
                                    <input type="number" class="control-input" id="marginLeft" min="0" max="5" step="0.1" value="0.5">
                                </div>
                            </div>
                        </div>
                        
                        <div class="control-group">
                            <label class="control-label">Apply to</label>
                            <select class="control-select" id="applyTo">
                                <option value="current">Current Page</option>
                                <option value="all">All Pages</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="page-controls">
                        <button class="page-btn" id="prevPageBtn" disabled>
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <span class="page-info" id="pageInfo">Page 1 of 1</span>
                        <button class="page-btn" id="nextPageBtn" disabled>
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Processing Area -->
        <div class="processing-area" id="processingArea">
            <div class="processing-icon">
                <i class="fas fa-cog fa-spin"></i>
            </div>
            <div class="processing-text">
                <h3>Processing Your PDF</h3>
                <p>Please wait while we crop your PDF document...</p>
            </div>
            <div class="progress-bar">
                <div class="progress" id="progressBar"></div>
            </div>
        </div>

        <!-- Results Area -->
        <div class="results-area" id="resultsArea">
            <div class="results-icon">
                <i class="fas fa-check-circle"></i>
            </div>
            <div class="results-text">
                <h3>PDF Successfully Cropped!</h3>
                <p>Your PDF has been cropped according to your specifications.</p>
            </div>
            <button class="download-btn" id="downloadBtn">
                <i class="fas fa-download"></i> Download Cropped PDF
            </button>
        </div>
    </section>

    <!-- Ad Unit - Medium Rectangle -->
    <div class="container">
        <div class="ad-unit horizontal">
            <!-- AdSense Medium Rectangle Ad -->
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-YOUR_AD_CLIENT_ID"
                 data-ad-slot="YOUR_MEDIUM_RECTANGLE_SLOT_ID"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
            <script>
                 (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>
    </div>

    <!-- Features Section -->
    <section class="features">
        <div class="container">
            <div class="section-title">
                <h2>Why Use Our PDF Cropping Tool?</h2>
                <p>Our tool offers everything you need to crop PDF files quickly and efficiently</p>
            </div>

            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-crop-alt"></i>
                    </div>
                    <h3>Precise Cropping</h3>
                    <p>Select exact areas to keep or remove with pixel-perfect precision using our intuitive cropping interface.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-bolt"></i>
                    </div>
                    <h3>Fast Processing</h3>
                    <p>Crop your PDF files in seconds with our optimized processing engine that works directly in your browser.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <h3>Secure & Private</h3>
                    <p>Your files never leave your device. All processing happens locally in your browser for maximum security.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-file-pdf"></i>
                    </div>
                    <h3>High Quality Output</h3>
                    <p>Maintain the original quality of your PDF documents while removing unwanted margins or sections.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- FAQ Section -->
    <section class="faq-section">
        <div class="container">
            <div class="section-title">
                <h2>Frequently Asked Questions</h2>
                <p>Find answers to common questions about PDF cropping</p>
            </div>

            <div class="faq-container">
                <div class="faq-item">
                    <div class="faq-question">
                        <span>How does the PDF cropping tool work?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>Our PDF cropping tool allows you to remove unwanted margins or select specific areas of your PDF document. You can choose between manual selection, automatic margin removal, or custom margin settings. The tool processes your PDF directly in your browser without uploading to any server.</p>
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question">
                        <span>Is there a file size limit for PDF cropping?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>We recommend PDF files under 50MB for optimal performance. Larger files may take longer to process depending on your device's capabilities.</p>
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question">
                        <span>Can I crop multiple pages at once?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>Yes, you can apply the same cropping settings to all pages in your PDF document, or customize the cropping for individual pages as needed.</p>
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question">
                        <span>Will cropping affect the quality of my PDF?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>No, our cropping tool maintains the original quality of your PDF. The cropping process doesn't recompress or degrade the content in any way.</p>
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question">
                        <span>Is my PDF secure when using this tool?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>Absolutely. All processing happens locally in your browser. Your PDF files are never uploaded to any server, ensuring complete privacy and security.</p>
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question">
                        <span>What if I make a mistake while cropping?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>You can always reset the cropping and start over. The original PDF remains unchanged on your device until you download the cropped version.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>EditInSeconds.com</h3>
                    <p>Your all-in-one solution for image and PDF tools. Fast, secure, and easy to use.</p>
                    <div class="social-links">
                        <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                        <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                        <a href="#" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>

                <div class="footer-column">
                    <h3>Image Tools</h3>
                    <ul>
                        <li><a href="/tools/img-compress.html">Compress Image</a></li>
                        <li><a href="/tools/img-resizer.html">Resize Image</a></li>
                        <li><a href="/tools/img-converter.html">Convert Image</a></li>
                        <li><a href="/tools/watermark-tool.html">Watermark</a></li>
                        <li><a href="/tools/crop-img-tool.html">Crop Image</a></li>
                    </ul>
                </div>

                <div class="footer-column">
                    <h3>PDF Tools</h3>
                    <ul>
                        <li><a href="/tools/pdf-compressor.html">Compress PDF</a></li>
                        <li><a href="/tools/merge-pdf.html">Merge PDF</a></li>
                        <li><a href="/tools/split-pdf.html">Split PDF</a></li>
                        <li><a href="/tools/pdf-word-converter.html">PDF to Word</a></li>
                        <li><a href="/tools/pdf-protector.html">Protect PDF</a></li>
                    </ul>
                </div>

                <div class="footer-column">
                    <h3>PDF Security</h3>
                    <ul>
                        <li><a href="/tools/unlock-pdf-tool.html">Unlock PDF</a></li>
                        <li><a href="/tools/pdf-protector.html">Protect PDF</a></li>
                        <li><a href="/tools/sign-pdf-tool.html">Sign PDF</a></li>
                        <li><a href="/tools/redact-pdf-tool.html">Redact PDF</a></li>
                        <li><a href="/tools/pdf-comparison-tool.html">Compare PDF</a></li>
                    </ul>
                </div>

                <div class="footer-column">
                    <h3>Company</h3>
                    <ul>
                        <li><a href="/about.html">About Us</a></li>
                        <li><a href="/contact.html">Contact</a></li>
                        <li><a href="/privacy.html">Privacy Policy</a></li>
                        <li><a href="/terms.html">Terms of Service</a></li>
                        <li><a href="/blog.html">Blog</a></li>
                    </ul>
                </div>
            </div>

            <div class="copyright">
                <p>&copy; 2025 EditInSeconds.com. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Set up PDF.js worker
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.worker.min.js';

        // DOM Elements
        const uploadArea = document.getElementById('uploadArea');
        const fileInput = document.getElementById('fileInput');
        const uploadBtn = document.getElementById('uploadBtn');
        const toolInterface = document.getElementById('toolInterface');
        const previewContainer = document.getElementById('previewContainer');
        const pdfPreview = document.getElementById('pdfPreview');
        const cropMode = document.getElementById('cropMode');
        const marginsGroup = document.getElementById('marginsGroup');
        const customMarginsGroup = document.getElementById('customMarginsGroup');
        const marginSize = document.getElementById('marginSize');
        const marginTop = document.getElementById('marginTop');
        const marginRight = document.getElementById('marginRight');
        const marginBottom = document.getElementById('marginBottom');
        const marginLeft = document.getElementById('marginLeft');
        const applyTo = document.getElementById('applyTo');
        const prevPageBtn = document.getElementById('prevPageBtn');
        const nextPageBtn = document.getElementById('nextPageBtn');
        const pageInfo = document.getElementById('pageInfo');
        const resetBtn = document.getElementById('resetBtn');
        const cropBtn = document.getElementById('cropBtn');
        const processingArea = document.getElementById('processingArea');
        const progressBar = document.getElementById('progressBar');
        const resultsArea = document.getElementById('resultsArea');
        const downloadBtn = document.getElementById('downloadBtn');

        // PDF state variables
        let pdfDoc = null;
        let currentPage = 1;
        let totalPages = 0;
        let canvas = null;
        let ctx = null;
        let cropOverlay = null;
        let isDragging = false;
        let startX, startY;
        let cropRect = { x: 0, y: 0, width: 0, height: 0 };
        let scale = 1;
        let originalFile = null;
        let canvasOffset = { x: 0, y: 0 };

        // Event Listeners
        uploadArea.addEventListener('click', () => fileInput.click());
        uploadArea.addEventListener('dragover', handleDragOver);
        uploadArea.addEventListener('drop', handleFileDrop);
        uploadBtn.addEventListener('click', () => fileInput.click());
        fileInput.addEventListener('change', handleFileSelect);
        cropMode.addEventListener('change', handleCropModeChange);
        prevPageBtn.addEventListener('click', showPrevPage);
        nextPageBtn.addEventListener('click', showNextPage);
        resetBtn.addEventListener('click', resetCrop);
        cropBtn.addEventListener('click', processCrop);
        downloadBtn.addEventListener('click', downloadCroppedPDF);

        // Mobile menu toggle
        document.getElementById('mobileMenuBtn').addEventListener('click', function() {
            document.getElementById('mainNav').classList.toggle('active');
        });

        // Close mobile menu when clicking outside
        document.addEventListener('click', function(event) {
            const nav = document.getElementById('mainNav');
            const menuBtn = document.getElementById('mobileMenuBtn');

            if (!nav.contains(event.target) && !menuBtn.contains(event.target)) {
                nav.classList.remove('active');
            }
        });

        // FAQ accordion functionality
        document.querySelectorAll('.faq-question').forEach(question => {
            question.addEventListener('click', () => {
                const item = question.parentNode;
                item.classList.toggle('active');
            });
        });

        // Functions
        function handleDragOver(e) {
            e.preventDefault();
            uploadArea.classList.add('active');
        }

        function handleFileDrop(e) {
            e.preventDefault();
            uploadArea.classList.remove('active');
            
            if (e.dataTransfer.files.length > 0) {
                const file = e.dataTransfer.files[0];
                if (file.type === 'application/pdf') {
                    loadPDF(file);
                } else {
                    alert('Please select a PDF file.');
                }
            }
        }

        function handleFileSelect(e) {
            if (e.target.files.length > 0) {
                const file = e.target.files[0];
                if (file.type === 'application/pdf') {
                    loadPDF(file);
                } else {
                    alert('Please select a PDF file.');
                }
            }
        }

        function handleCropModeChange() {
            const mode = cropMode.value;
            
            if (mode === 'manual') {
                marginsGroup.style.display = 'none';
                customMarginsGroup.style.display = 'none';
                enableManualCropping();
            } else if (mode === 'margins') {
                marginsGroup.style.display = 'flex';
                customMarginsGroup.style.display = 'none';
                disableManualCropping();
            } else if (mode === 'custom') {
                marginsGroup.style.display = 'none';
                customMarginsGroup.style.display = 'block';
                disableManualCropping();
            }
        }

        function enableManualCropping() {
            if (canvas) {
                canvas.style.cursor = 'crosshair';
                canvas.addEventListener('mousedown', startCrop);
                canvas.addEventListener('mousemove', dragCrop);
                canvas.addEventListener('mouseup', endCrop);
                canvas.addEventListener('touchstart', startCropTouch);
                canvas.addEventListener('touchmove', dragCropTouch);
                canvas.addEventListener('touchend', endCrop);
            }
        }

        function disableManualCropping() {
            if (canvas) {
                canvas.style.cursor = 'default';
                canvas.removeEventListener('mousedown', startCrop);
                canvas.removeEventListener('mousemove', dragCrop);
                canvas.removeEventListener('mouseup', endCrop);
                canvas.removeEventListener('touchstart', startCropTouch);
                canvas.removeEventListener('touchmove', dragCropTouch);
                canvas.removeEventListener('touchend', endCrop);
                
                // Remove crop overlay if exists
                if (cropOverlay) {
                    cropOverlay.remove();
                    cropOverlay = null;
                }
            }
        }

        function startCrop(e) {
            isDragging = true;
            const rect = canvas.getBoundingClientRect();
            
            // Calculate the actual position considering the canvas offset and scale
            const canvasX = (e.clientX - rect.left - canvasOffset.x) / scale;
            const canvasY = (e.clientY - rect.top - canvasOffset.y) / scale;
            
            startX = canvasX;
            startY = canvasY;
            
            // Create crop overlay if it doesn't exist
            if (!cropOverlay) {
                cropOverlay = document.createElement('div');
                cropOverlay.className = 'crop-overlay';
                cropOverlay.style.position = 'absolute';
                cropOverlay.style.pointerEvents = 'none';
                
                // Create resize handles
                const handles = ['nw', 'ne', 'sw', 'se'];
                handles.forEach(pos => {
                    const handle = document.createElement('div');
                    handle.className = `crop-handle ${pos}`;
                    cropOverlay.appendChild(handle);
                });
                
                canvas.parentNode.appendChild(cropOverlay);
            }
            
            cropRect.x = startX;
            cropRect.y = startY;
            cropRect.width = 0;
            cropRect.height = 0;
            
            updateCropOverlay();
        }

        function startCropTouch(e) {
            e.preventDefault();
            if (e.touches.length === 1) {
                const touch = e.touches[0];
                const rect = canvas.getBoundingClientRect();
                
                // Calculate the actual position considering the canvas offset and scale
                const canvasX = (touch.clientX - rect.left - canvasOffset.x) / scale;
                const canvasY = (touch.clientY - rect.top - canvasOffset.y) / scale;
                
                startX = canvasX;
                startY = canvasY;
                isDragging = true;
                
                // Create crop overlay if it doesn't exist
                if (!cropOverlay) {
                    cropOverlay = document.createElement('div');
                    cropOverlay.className = 'crop-overlay';
                    cropOverlay.style.position = 'absolute';
                    cropOverlay.style.pointerEvents = 'none';
                    
                    // Create resize handles
                    const handles = ['nw', 'ne', 'sw', 'se'];
                    handles.forEach(pos => {
                        const handle = document.createElement('div');
                        handle.className = `crop-handle ${pos}`;
                        cropOverlay.appendChild(handle);
                    });
                    
                    canvas.parentNode.appendChild(cropOverlay);
                }
                
                cropRect.x = startX;
                cropRect.y = startY;
                cropRect.width = 0;
                cropRect.height = 0;
                
                updateCropOverlay();
            }
        }

        function dragCrop(e) {
            if (!isDragging) return;
            
            const rect = canvas.getBoundingClientRect();
            
            // Calculate the actual position considering the canvas offset and scale
            const currentX = (e.clientX - rect.left - canvasOffset.x) / scale;
            const currentY = (e.clientY - rect.top - canvasOffset.y) / scale;
            
            cropRect.width = currentX - startX;
            cropRect.height = currentY - startY;
            
            // Ensure positive dimensions and boundaries
            if (cropRect.width < 0) {
                cropRect.x = currentX;
                cropRect.width = -cropRect.width;
            } else {
                cropRect.x = startX;
            }
            
            if (cropRect.height < 0) {
                cropRect.y = currentY;
                cropRect.height = -cropRect.height;
            } else {
                cropRect.y = startY;
            }
            
            // Ensure crop area stays within canvas bounds
            cropRect.x = Math.max(0, cropRect.x);
            cropRect.y = Math.max(0, cropRect.y);
            cropRect.width = Math.min(canvas.width - cropRect.x, cropRect.width);
            cropRect.height = Math.min(canvas.height - cropRect.y, cropRect.height);
            
            updateCropOverlay();
        }

        function dragCropTouch(e) {
            if (!isDragging || e.touches.length !== 1) return;
            e.preventDefault();
            
            const touch = e.touches[0];
            const rect = canvas.getBoundingClientRect();
            
            // Calculate the actual position considering the canvas offset and scale
            const currentX = (touch.clientX - rect.left - canvasOffset.x) / scale;
            const currentY = (touch.clientY - rect.top - canvasOffset.y) / scale;
            
            cropRect.width = currentX - startX;
            cropRect.height = currentY - startY;
            
            // Ensure positive dimensions and boundaries
            if (cropRect.width < 0) {
                cropRect.x = currentX;
                cropRect.width = -cropRect.width;
            } else {
                cropRect.x = startX;
            }
            
            if (cropRect.height < 0) {
                cropRect.y = currentY;
                cropRect.height = -cropRect.height;
            } else {
                cropRect.y = startY;
            }
            
            // Ensure crop area stays within canvas bounds
            cropRect.x = Math.max(0, cropRect.x);
            cropRect.y = Math.max(0, cropRect.y);
            cropRect.width = Math.min(canvas.width - cropRect.x, cropRect.width);
            cropRect.height = Math.min(canvas.height - cropRect.y, cropRect.height);
            
            updateCropOverlay();
        }

        function endCrop() {
            isDragging = false;
        }

        function updateCropOverlay() {
            if (!cropOverlay) return;
            
            cropOverlay.style.left = `${(cropRect.x * scale) + canvasOffset.x}px`;
            cropOverlay.style.top = `${(cropRect.y * scale) + canvasOffset.y}px`;
            cropOverlay.style.width = `${cropRect.width * scale}px`;
            cropOverlay.style.height = `${cropRect.height * scale}px`;
        }

        function loadPDF(file) {
            // Show loading state
            pdfPreview.innerHTML = '<p>Loading PDF...</p>';
            originalFile = file;
            
            const fileReader = new FileReader();
            
            fileReader.onload = function() {
                const typedArray = new Uint8Array(this.result);
                
                // Load the PDF
                pdfjsLib.getDocument(typedArray).promise.then(function(pdf) {
                    pdfDoc = pdf;
                    totalPages = pdf.numPages;
                    currentPage = 1;
                    
                    // Update UI
                    uploadArea.style.display = 'none';
                    toolInterface.classList.add('active');
                    updatePageInfo();
                    
                    // Render the first page
                    renderPage(currentPage);
                }).catch(function(error) {
                    console.error('Error loading PDF:', error);
                    alert('Error loading PDF. Please make sure it\'s a valid PDF file.');
                    resetUI();
                });
            };
            
            fileReader.readAsArrayBuffer(file);
        }

        function renderPage(pageNum) {
            pdfDoc.getPage(pageNum).then(function(page) {
                const viewport = page.getViewport({ scale: 1.5 });
                
                // Create canvas if it doesn't exist
                if (!canvas) {
                    canvas = document.createElement('canvas');
                    ctx = canvas.getContext('2d');
                    pdfPreview.innerHTML = '';
                    pdfPreview.appendChild(canvas);
                }
                
                canvas.height = viewport.height;
                canvas.width = viewport.width;
                
                // Calculate scale for display and center the canvas
                const containerWidth = previewContainer.clientWidth - 40; // Account for padding
                const containerHeight = previewContainer.clientHeight - 40;
                
                // Calculate scale to fit the canvas in the container while maintaining aspect ratio
                const scaleX = containerWidth / viewport.width;
                const scaleY = containerHeight / viewport.height;
                scale = Math.min(scaleX, scaleY, 1.5); // Don't scale up beyond 1.5
                
                // Calculate offset to center the canvas
                canvasOffset.x = (containerWidth - (viewport.width * scale)) / 2;
                canvasOffset.y = (containerHeight - (viewport.height * scale)) / 2;
                
                canvas.style.transform = `scale(${scale})`;
                canvas.style.transformOrigin = 'top left';
                canvas.style.marginLeft = `${canvasOffset.x}px`;
                canvas.style.marginTop = `${canvasOffset.y}px`;
                
                // Render PDF page
                const renderContext = {
                    canvasContext: ctx,
                    viewport: viewport
                };
                
                page.render(renderContext).promise.then(function() {
                    // Enable manual cropping if selected
                    if (cropMode.value === 'manual') {
                        enableManualCropping();
                    }
                    
                    // Update page navigation buttons
                    prevPageBtn.disabled = currentPage <= 1;
                    nextPageBtn.disabled = currentPage >= totalPages;
                });
            });
        }

        function showPrevPage() {
            if (currentPage > 1) {
                currentPage--;
                updatePageInfo();
                renderPage(currentPage);
            }
        }

        function showNextPage() {
            if (currentPage < totalPages) {
                currentPage++;
                updatePageInfo();
                renderPage(currentPage);
            }
        }

        function updatePageInfo() {
            pageInfo.textContent = `Page ${currentPage} of ${totalPages}`;
        }

        function resetCrop() {
            // Reset crop rectangle
            cropRect = { x: 0, y: 0, width: 0, height: 0 };
            
            // Remove crop overlay
            if (cropOverlay) {
                cropOverlay.remove();
                cropOverlay = null;
            }
            
            // Reset form values
            cropMode.value = 'manual';
            marginSize.value = '0.5';
            marginTop.value = '0.5';
            marginRight.value = '0.5';
            marginBottom.value = '0.5';
            marginLeft.value = '0.5';
            applyTo.value = 'current';
            
            // Update UI
            handleCropModeChange();
        }

        function resetUI() {
            uploadArea.style.display = 'block';
            toolInterface.classList.remove('active');
            processingArea.classList.remove('active');
            resultsArea.classList.remove('active');
            
            // Reset variables
            pdfDoc = null;
            currentPage = 1;
            totalPages = 0;
            canvas = null;
            ctx = null;
            cropOverlay = null;
            isDragging = false;
            cropRect = { x: 0, y: 0, width: 0, height: 0 };
            scale = 1;
            originalFile = null;
            canvasOffset = { x: 0, y: 0 };
            
            // Clear file input
            fileInput.value = '';
        }

        async function processCrop() {
            // Show processing area
            toolInterface.classList.remove('active');
            processingArea.classList.add('active');
            
            try {
                // Get crop settings
                const mode = cropMode.value;
                const applyToAll = applyTo.value === 'all';
                
                // Process the PDF
                const croppedPDF = await cropPDF(mode, applyToAll);
                
                // Store the result for download
                window.croppedPDFBlob = croppedPDF;
                
                // Show results after processing
                processingArea.classList.remove('active');
                resultsArea.classList.add('active');
            } catch (error) {
                console.error('Error processing PDF:', error);
                alert('Error processing PDF. Please try again.');
                resetUI();
            }
        }

        async function cropPDF(mode, applyToAll) {
            return new Promise(async (resolve, reject) => {
                try {
                    // Initialize jsPDF
                    const { jsPDF } = window.jspdf;
                    const pdf = new jsPDF();
                    
                    // Get the pages to process
                    const pagesToProcess = applyToAll ? 
                        Array.from({length: totalPages}, (_, i) => i + 1) : 
                        [currentPage];
                    
                    // Process each page
                    for (let i = 0; i < pagesToProcess.length; i++) {
                        const pageNum = pagesToProcess[i];
                        
                        // Update progress
                        const progress = Math.round((i / pagesToProcess.length) * 100);
                        progressBar.style.width = `${progress}%`;
                        
                        // Get the page
                        const page = await pdfDoc.getPage(pageNum);
                        const viewport = page.getViewport({ scale: 2.0 });
                        
                        // Create a temporary canvas for rendering
                        const tempCanvas = document.createElement('canvas');
                        const tempCtx = tempCanvas.getContext('2d');
                        tempCanvas.width = viewport.width;
                        tempCanvas.height = viewport.height;
                        
                        // Render the page to the canvas
                        await page.render({
                            canvasContext: tempCtx,
                            viewport: viewport
                        }).promise;
                        
                        // Calculate crop area based on mode
                        let cropArea = calculateCropArea(mode, viewport);
                        
                        // Create a new canvas with the cropped area
                        const croppedCanvas = document.createElement('canvas');
                        const croppedCtx = croppedCanvas.getContext('2d');
                        croppedCanvas.width = cropArea.width;
                        croppedCanvas.height = cropArea.height;
                        
                        // Draw the cropped area
                        croppedCtx.drawImage(
                            tempCanvas,
                            cropArea.x, cropArea.y, cropArea.width, cropArea.height,
                            0, 0, cropArea.width, cropArea.height
                        );
                        
                        // Convert canvas to image data
                        const imgData = croppedCanvas.toDataURL('image/jpeg', 0.9);
                        
                        // Add page to PDF
                        if (i > 0) {
                            pdf.addPage();
                        }
                        
                        // Calculate dimensions for PDF (convert pixels to mm)
                        const widthMM = (cropArea.width / viewport.width) * 210; // A4 width in mm
                        const heightMM = (cropArea.height / viewport.height) * 297; // A4 height in mm
                        
                        // Add image to PDF
                        pdf.addImage(imgData, 'JPEG', 0, 0, widthMM, heightMM);
                    }
                    
                    // Final progress update
                    progressBar.style.width = '100%';
                    
                    // Generate PDF blob
                    const pdfBlob = pdf.output('blob');
                    resolve(pdfBlob);
                    
                } catch (error) {
                    reject(error);
                }
            });
        }

        function calculateCropArea(mode, viewport) {
            const dpi = 72; // Standard PDF DPI
            const mmToPx = dpi / 25.4;
            
            switch (mode) {
                case 'manual':
                    // Use the manually selected crop area
                    // Ensure crop area is valid
                    if (cropRect.width <= 0 || cropRect.height <= 0) {
                        // If no manual selection, return full page
                        return {
                            x: 0,
                            y: 0,
                            width: viewport.width,
                            height: viewport.height
                        };
                    }
                    
                    return {
                        x: cropRect.x,
                        y: cropRect.y,
                        width: cropRect.width,
                        height: cropRect.height
                    };
                    
                case 'margins':
                    // Remove margins based on the specified size
                    const marginPx = parseFloat(marginSize.value) * mmToPx * (96 / 72);
                    return {
                        x: marginPx,
                        y: marginPx,
                        width: Math.max(0, viewport.width - (2 * marginPx)),
                        height: Math.max(0, viewport.height - (2 * marginPx))
                    };
                    
                case 'custom':
                    // Remove custom margins
                    const topPx = parseFloat(marginTop.value) * mmToPx * (96 / 72);
                    const rightPx = parseFloat(marginRight.value) * mmToPx * (96 / 72);
                    const bottomPx = parseFloat(marginBottom.value) * mmToPx * (96 / 72);
                    const leftPx = parseFloat(marginLeft.value) * mmToPx * (96 / 72);
                    
                    return {
                        x: leftPx,
                        y: topPx,
                        width: Math.max(0, viewport.width - (leftPx + rightPx)),
                        height: Math.max(0, viewport.height - (topPx + bottomPx))
                    };
                    
                default:
                    return {
                        x: 0,
                        y: 0,
                        width: viewport.width,
                        height: viewport.height
                    };
            }
        }

        function downloadCroppedPDF() {
            if (!window.croppedPDFBlob) {
                alert('No cropped PDF available. Please crop a PDF first.');
                return;
            }
            
            // Create download link
            const url = URL.createObjectURL(window.croppedPDFBlob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'cropped-document.pdf';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            // Reset UI after download
            setTimeout(() => {
                resetUI();
            }, 2000);
        }

        // Initialize
        handleCropModeChange();
    </script>
</body>
</html>
